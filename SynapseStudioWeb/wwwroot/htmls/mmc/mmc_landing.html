<!--BEGIN LICENSE BLOCK--> 
<!--Interneuron Synapse

Copyright(C) 2024  Interneuron Limited

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.If not, see<http://www.gnu.org/licenses/>. -->
<!--END LICENSE BLOCK--> 
ï»¿bu<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FormularyList - SynapseStudioWeb</title>


    <script type="text/javascript">
        (function () {
            window.AppPath = 'https://synapsestudio-demo.azurewebsites.net';
        })();
    </script>




    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" crossorigin="anonymous" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T">
    <meta name="x-stylesheet-fallback-test" content="" class="sr-only">
    <script>!function (a, b, c, d) { var e, f = document, g = f.getElementsByTagName("SCRIPT"), h = g[g.length - 1].previousElementSibling, i = f.defaultView && f.defaultView.getComputedStyle ? f.defaultView.getComputedStyle(h) : h.currentStyle; if (i && i[a] !== b) for (e = 0; e < c.length; e++)f.write('<link href="' + c[e] + '" ' + d + "/>") }("position", "absolute", ["/lib/bootstrap/dist/css/bootstrap.min.css"], "rel=\u0022stycuslesheet\u0022 crossorigin=\u0022anonymous\u0022 integrity=\u0022sha384-ggOyR0iXCbMQv3Xipma34MD\u002BdH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\u0022 ");</script>

    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/site.css">



    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" crossorigin="anonymous" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=">
    </script>
    <script>(window.jQuery || document.write("\u003Cscript src=\u0022/lib/jquery/dist/jquery.min.js\u0022 crossorigin=\u0022anonymous\u0022 integrity=\u0022sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=\u0022\u003E\u003C/script\u003E"));</script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" crossorigin="anonymous" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o">
    </script>
    <script>(window.jQuery && window.jQuery.fn && window.jQuery.fn.modal || document.write("\u003Cscript src=\u0022/lib/bootstrap/dist/js/bootstrap.bundle.min.js\u0022 crossorigin=\u0022anonymous\u0022 integrity=\u0022sha384-xrRywqdh3PHs8keKZN\u002B8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o\u0022\u003E\u003C/script\u003E"));</script>

    <link href="/css/toastr.min.css" rel="stylesheet">
    <!-- <snippet_Scripts> -->
    <script src="/lib/notify/notify.js"></script>
    <style type="text/css" id="notify-bootstrap">
        .notifyjs-bootstrap-base {
            font-weight: bold;
            padding: 8px 15px 8px 14px;
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
            background-color: #fcf8e3;
            border: 1px solid #fbeed5;
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
            white-space: nowrap;
            padding-left: 25px;
            background-repeat: no-repeat;
            background-position: 3px 7px;
        }

        .notifyjs-bootstrap-error {
            color: #B94A48;
            background-color: #F2DEDE;
            border-color: #EED3D7;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=);
        }

        .notifyjs-bootstrap-success {
            color: #468847;
            background-color: #DFF0D8;
            border-color: #D6E9C6;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==);
        }

        .notifyjs-bootstrap-info {
            color: #3A87AD;
            background-color: #D9EDF7;
            border-color: #BCE8F1;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=);
        }

        .notifyjs-bootstrap-warn {
            color: #C09853;
            background-color: #FCF8E3;
            border-color: #FBEED5;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC);
        }
    </style>
    <script src="/lib/jquery-validation/dist/jquery.validate.js"></script>
    <script src="/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
    <script src="/lib/jquery-validation-unobtrusive/jquery.unobtrusive-ajax.js"></script>
    <script src="/js/toastr.min.js"></script>
    <script src="/js/ajax.js"></script>

    <!-- </snippet_Scripts> -->
    <style type="text/css" id="core-notify">
        .notifyjs-corner {
            position: fixed;
            margin: 5px;
            z-index: 1050;
        }

            .notifyjs-corner .notifyjs-wrapper,
            .notifyjs-corner .notifyjs-container {
                position: relative;
                display: block;
                height: inherit;
                width: inherit;
                margin: 3px;
            }

        .notifyjs-wrapper {
            z-index: 1;
            position: absolute;
            display: inline-block;
            height: 0;
            width: 0;
        }

        .notifyjs-container {
            display: none;
            z-index: 1;
            position: absolute;
        }

        .notifyjs-hidable {
            cursor: pointer;
        }

        [data-notify-text], [data-notify-html] {
            position: relative;
        }

        .notifyjs-arrow {
            position: absolute;
            z-index: 2;
            width: 0;
            height: 0;
        }
    </style>
</head>
<body class="nav-md" cz-shortcut-listen="true">
    <div class="container body">
        <div class="main_container">
            <div class="col-md-3 left_col">
                <div class="left_col scroll-view">
                    <div class="navbar nav_title" style="border: 0;">
                        <a href="/home" class="site_title"><img src="/img/InterneuronIcon.jpeg" alt="Interneuron" style="width:30px;height:30px;"> <span>Synapse Studio</span></a>
                    </div>

                    <div class="clearfix"></div>

                    <br>

                    <!-- sidebar menu -->
                    <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
                        <div class="menu_section active">

                            <ul class="nav side-menu">
                                <li>
                                    <a href="/home"><i class="fa fa-home"></i> Home</a>

                                </li>
                                <li>
                                    <a href="/EntityManager/EntityManagerList"><i class="fa fa-database"></i> Entity Manager</a>

                                </li>
                                <li>
                                    <a href="/BaseView/BaseViewManagerList"><i class="fa fa-anchor"></i>Baseview</a>

                                </li>
                                <li>
                                    <a href="/List/ListManagerList"><i class="fa fa-list"></i>Lists</a>

                                </li>
                                <li>
                                    <a href="/Board/BoardManagerList"><i class="fa fa-columns"></i> Boards</a>

                                </li>
                                <li class="current-page">
                                    <a href="/Formulary/FormularyList"><i class="fa fa-wpforms"></i> Medication Management</a>
                                </li>
                                <li class="current-page">
                                    <a href="/htmls/mmc/mmc_landing.html"><i class="fa fa-wpforms"></i> Medication Management Prototype</a>
                                </li>
                                <li>
                                    <a href="/SchemaMigration/SchemaExport"><i class="fa fa-refresh"></i> Schema Migration</a>

                                </li>
                                <li>
                                    <!-- <a href="~/DevOps/DevOpsDashboard"><i class="fa fa-server"></i>DevOps</a> -->
                                    <a><i class="fa fa-server"></i> DevOps <span class="fa fa-chevron-down"></span></a>
                                    <ul class="nav child_menu">
                                        <li><i class="fa fa-dashboard"></i><a href="/DevOps/DevOpsDashboard">Dashboard</a></li>
                                        <li><i class="fa fa-handshake"></i><a href="#" onclick="javascript: window.open('https://interneuron-ne-jenkins-test.northeurope.cloudapp.azure.com/'); return false;" target="_blank">CI \ CD</a></li>

                                    </ul>

                                </li>
                                <li>
                                    <a><i class="fa fa-user-secret"></i> Security <span class="fa fa-chevron-down"></span></a>
                                    <ul class="nav child_menu">
                                        <li><i class="fa fa-user"></i><a href="/Security/SecurityManager">Security</a></li>
                                        <li><i class="fa fa-check"></i><a href="/RoleMapping/Roleobjectselection?id=2">Role</a></li>
                                        <li><i class="fa fa-gear"></i><a href="/Action/ActionList">Action</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a><i class="fa fa-bug"></i> Application <span class="fa fa-chevron-down"></span></a>
                                    <ul class="nav child_menu">
                                        <li><i class="fa fa-wpforms"></i><a href="/ApplicationManager/ApplicationManager">Application Module</a></li>
                                        <li><i class="fa fa-list-alt"></i><a href="/ApplicationList/ApplicationList">Application List</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a><i class="fa fa-list"></i> Meta Data <span class="fa fa-chevron-down"></span></a>
                                    <ul class="nav child_menu">
                                        <li><i class="fa fa-wpforms"></i><a href="/Location/LocationList">Location</a></li>
                                        <li><i class="fa fa-wpforms"></i><a href="/Provider/ProviderList">Provider</a></li>
                                        <li><i class="fa fa-wpforms"></i><a href="/Specialty/SpecialtyList">Specialty</a></li>
                                        <li><i class="fa fa-wpforms"></i><a href="/Ward/WardList">Ward</a></li>
                                        <li><i class="fa fa-wpforms"></i><a href="/WardBay/WardBayList">Ward Bay</a></li>
                                        <li><i class="fa fa-wpforms"></i><a href="/WardBayBed/WardBayBedList">Ward Bay Bed</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="/Account/Logout"><i class="fa fa-sign-out"></i> Logout</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- /sidebar menu -->
                </div>
            </div>

            <!-- top navigation -->
            <div class="top_nav">
                <div class="nav_menu">
                    <div class="nav toggle">
                        <a id="menu_toggle"><i class="fa fa-bars"></i></a>
                    </div>
                    <nav class="nav navbar-nav">
                        <ul class=" navbar-right">
                            <li class="nav-item dropdown open" style="padding-left: 15px;">
                                <a href="javascript:;" class="user-profile dropdown-toggle" aria-haspopup="true" id="navbarDropdown" data-toggle="dropdown" aria-expanded="false">
                                    Marur Arun
                                </a>
                                <div class="dropdown-menu dropdown-usermenu pull-right" aria-labelledby="navbarDropdown">

                                    <a class="dropdown-item" href="/Account/Logout"><i class="fa fa-sign-out pull-right"></i> Log Out</a>
                                </div>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
            <!-- /top navigation -->
            <!-- page content -->
            <div class="right_col" role="main" style="min-height: 405px;">

                <link href="/css/ui.fancytree.css" rel="stylesheet" class="skinswitcher">
                <link href="/css/bootstrap-multiselect.css" rel="stylesheet" type="text/css">
                <link href="/lib/jqueryui-1.12.1/jquery-ui.min.css" rel="stylesheet" type="text/css">
                <link href="/css/studio.bootstrap4-toggle.min.css" rel="stylesheet">
                <link href="/lib/fontawesome-free-5.14.0/css/all.min.css" rel="stylesheet" type="text/css">

                <style type="text/css">
                    .formulary-list {
                    }

                        .formulary-list .multi-select {
                        }

                            .formulary-list .multi-select .btn-group {
                                border: 1px solid rgb(206, 212, 218);
                            }

                        .formulary-list span.fancytree-custom-icon {
                            color: #212529 !important;
                            font-size: 1rem !important;
                        }

                        .formulary-list ul.token-input-list-facebook {
                            overflow-x: auto;
                            min-height: 2.5rem !important;
                        }

                        .formulary-list ul.token-input-disabled-facebook,
                        .formulary-list ul.token-input-disabled-facebook input {
                            cursor: not-allowed !important;
                            background-color: #adafae !important;
                            opacity: 1 !important
                        }

                        .formulary-list .user-instruction {
                            color: #17a2b8;
                            font-size: 0.9rem;
                            margin: 0.7rem;
                        }

                    .ui-contextmenu-custom {
                        font-size: 0.9rem !important;
                    }

                        .ui-contextmenu-custom li {
                            margin: 0.2rem !important;
                        }
                    /* Allow Font Awesome Icons in lieu of jQuery UI and only apply when using a FA icon */
                    /* Allow Font Awesome Icons in lieu of jQuery UI and only apply when using a FA icon */
                    .ui-icon[class*=" fa-"] {
                        /* Remove the jQuery UI Icon */
                        background: none repeat scroll 0 0 transparent;
                        /* Remove the jQuery UI Text Indent */
                        text-indent: 0;
                        /* Bump it up - jQuery UI is -8px */
                        /* margin-top: -0.5em; */
                    }

                    /* Allow use of icon-large to be properly aligned */
                    .ui-icon.icon-large {
                        margin-top: -0.75em;
                    }

                    .ui-button-icon-only .ui-icon[class*=" fa-"] {
                        /* Bump it - jQuery UI is -8px */
                        margin-left: -7px;
                    }
                    /* Define custom width and alignment of table columns */
                    #treetable {
                        table-layout: fixed;
                    }

                        #treetable tr td:nth-of-type(1) {
                            text-align: right;
                        }

                        #treetable tr td:nth-of-type(2) {
                            text-align: left;
                        }

                        #treetable tr td:nth-of-type(3) {
                            min-width: 100px;
                            white-space: nowrap;
                            overflow: hidden;
                            text-overflow: ellipsis;
                        }

                    ul.fancytree-container {
                        border: none !important;
                    }

                    #treetable thead th {
                        position: sticky;
                        top: -5px;
                        z-index: 2;
                        background-color: #23282c;
                        color: white;
                        text-transform: uppercase;
                    }

                    #searchtext {
                        width: 100%;
                        box-sizing: border-box;
                        border: 2px solid #ccc;
                        border-radius: 4px;
                        font-size: 16px;
                        background-color: white;
                        background-repeat: no-repeat;
                        padding: 12px 20px 12px 12px;
                        -webkit-transition: width 0.4s ease-in-out;
                        transition: width 0.4s ease-in-out;
                    }

                        #searchtext:focus {
                            width: 100%;
                        }

                    .formulary-list .multiselect-container > li > a > label {
                        padding: 3px 20px 3px 10px !important;
                    }

                    .formulary-list #Update_Custom_Medication .x_panel {
                        padding: 0px !important;
                        /*border: 0px !important;*/
                    }

                    #tree2 ul.fancytree-container li span.bg-success span.fancytree-title {
                        /*min-width: 100% !important;*/
                        background-color: #28a745 !important;
                        padding-bottom: 2px !important;
                    }

                    .validation-summary-valid ul {
                        display: none;
                    }

                    img.fancytree-icon {
                        width: 1.5em;
                        height: 1.5em;
                    }

                    span.bulkedit-number {
                        height: 15px;
                        width: 15px;
                        background-color: orange;
                        border-radius: 50%;
                        display: inline-block;
                        position: absolute;
                        top: 0px;
                        left: 15px;
                        font-size: 0.8rem;
                        text-align: center;
                    }

                    #treetable a.status {
                        text-decoration: underline;
                        color: #333333;
                        font-size: 1rem;
                    }

                    ul li.ui-chips-token {
                        padding: .10725em 0;
                        margin: .10725em .286em .10725em 0;
                        background: #007ad9;
                        color: #fff;
                        cursor: default;
                        display: inline-block;
                        vertical-align: middle;
                        overflow: hidden;
                        white-space: nowrap;
                        position: relative;
                    }

                    ul li.ui-chips-token {
                        -moz-border-radius: 3px;
                        -webkit-border-radius: 3px;
                        border-radius: 3px;
                    }

                    ul li span.ui-chips-token-label {
                        padding: 0 2em 0 .5em;
                    }
                </style>

                <div class="formulary-list">
                    <div class="row">
                        <div class="col-md-12">
                            <h4>Medication Management</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <label class="h5"><i class="fa fa-list"></i>&nbsp;Formulary List</label>
                                    <label class="h5 float-right mr-2"><a href="#" id="addMed" title="Import"><i style="color:#212529;" class="fa fa-download"></i></a></label>
                                    <label class="h5 float-right mr-2"><a href="#" id="customMed" title="Create New"><i style="color:#212529;" class="fa fa-plus-square"></i></a></label>
                                    <label class="h5 float-right mr-2" id="lblFilter"><a href="#" id="filter" title="Show\Hide Filter"><i style="color:#212529;" class="fas fa-filter"></i></a></label>
                                </div>
                                <div class="card-body m-1 p-1">
                                    <div class="row">
                                        <div id="pnlFilterResults" class="mx-4 p-2" style="display: block; border: 1px dashed gray; width: 100%; border-radius: 16px;">
                                            <ul class="mb-0" style="margin-left:-25px;">
                                                <li class="ui-chips-token ui-state-active ui-corner-all">
                                                    <span class="ui-chips-token-label">Multi Select Filter: Formulary, Draft </span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="container" id="pnlFilterContainer" style="display:none;">
                                        <div class="form-group row m-1 p-1">
                                            <div class="col-3">
                                                <label>
                                                    Add Filters
                                                </label>
                                            </div>
                                            <div class="col-6">
                                                <select class="form-control">
                                                    <option>Search Text</option>
                                                    <option>Formulary Status</option>
                                                    <option>Archive Flag</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group row m-1 p-1" style="border-top:1px solid #e0e0e0;">
                                            <div class="col-3">
                                                <input type="checkbox" name="fields[]" value="search_text" checked="checked" id="cb_search_text">
                                                <label>
                                                    Search Text
                                                </label>
                                            </div>
                                            <div class="col-6">
                                                <div class="col-10" style="float:left;margin: 0px !important;padding: 0px !important;">
                                                    <input type="text" id="searchtext" name="search" placeholder="Search (Min 3 characters)">
                                                </div>
                                                <div style="clear:both;"></div>
                                            </div>
                                        </div>
                                        <div class="form-group row multi-select m-1 p-1" style="border-top:1px solid #e0e0e0;">
                                            <div class="col-3">
                                                <input type="checkbox" name="fields[]" value="multi_select" checked="checked" id="cb_multi_select">
                                                <label>
                                                    Multi Select Filter
                                                </label>
                                            </div>
                                            <div class="col-6">
                                                <span class="multiselect-native-select">
                                                    <select id="SelectedFilterStatuses" multiple="multiple" name="SelectedFilterStatuses" style="color: #fff; background-color: #6c757d; border-color: #6c757d;">
                                                        <option value="Rec|001">Draft</option>
                                                        <option value="Rec|002">Approved</option>
                                                        <option value="Rec|003">Active</option>
                                                        <option value="Rec|005">Inactive</option>
                                                        <option value="Form|001">Formulary</option>
                                                        <option value="Form|002">Non-Formulary</option>
                                                        <option value="Duplicate">Duplicate</option>
                                                    </select><div class="btn-group"><button type="button" class="multiselect dropdown-toggle btn btn-default" data-toggle="dropdown" title="Formulary"><span class="multiselect-selected-text">Formulary</span> <b class="caret"></b></button><ul class="multiselect-container dropdown-menu"><li><a tabindex="0"><label class="checkbox" title="Draft"><input type="checkbox" value="Rec|001"> Draft</label></a></li><li><a tabindex="0"><label class="checkbox" title="Approved"><input type="checkbox" value="Rec|002"> Approved</label></a></li><li><a tabindex="0"><label class="checkbox" title="Active"><input type="checkbox" value="Rec|003"> Active</label></a></li><li><a tabindex="0"><label class="checkbox" title="Inactive"><input type="checkbox" value="Rec|005"> Inactive</label></a></li><li class="active"><a tabindex="0"><label class="checkbox" title="Formulary"><input type="checkbox" value="Form|001"> Formulary</label></a></li><li><a tabindex="0"><label class="checkbox" title="Non-Formulary"><input type="checkbox" value="Form|002"> Non-Formulary</label></a></li><li><a tabindex="0"><label class="checkbox" title="Duplicate"><input type="checkbox" value="Duplicate"> Duplicate</label></a></li></ul></div>
                                                </span>
                                            </div>
                                        </div>
                                        <div class=" form-group row m-1 p-1" style="border-top:1px solid #e0e0e0;">
                                            <div class="col-3">
                                                <input type="checkbox" name="fields[]" value="is_archived" checked="checked" id="cb_is_archived">
                                                <label class="form-check-label" for="chkSearchArchive" style="font-size:0.8rem;">
                                                    Show only Archived
                                                </label>
                                            </div>
                                            <div class="col-6">
                                                <div>
                                                    <input type="checkbox" class="form-check-input" value="" name="chkSearchArchive" id="chkSearchArchive">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group row m-1 p-1" style="border-top:1px solid #e0e0e0 !important;border-bottom:1px solid #e0e0e0 !important;">
                                            <div class="col-12" style="text-align:right;margin: 6px;">
                                                <input type="button" id="btnApplyFilter" class="btn btn-success" value="Apply Settings">
                                            </div>
                                        </div>
                                    </div>
                                    <div id="frmlist-spinner" class="spinner-grow text-info" role="status" style="display:none;">
                                        <span class="sr-only">Loading...</span>
                                    </div>
                                    <div class="row" id="frmlist-tree" style="">
                                        <div class="col-md-12">
                                            <div class="col-md-12" style="text-align:end;margin-right:2px;margin-top:10px;">
                                                <i class="fas fa-file-signature" id="iBulkEdit" style="font-size:1.3rem;cursor:pointer;padding:3px;color:#212529;position:relative;" title="Bulk Edit"><span class="bulkedit-number"><label id="lblBulkEditNumber">0</label></span></i>
                                                <!--<i class="fas fa-eraser" style="font-size:1.3rem;cursor:pointer;padding:3px;color:#212529;" title="Clear basket"></i>-->
                                            </div>
                                            <div class="col-md-12">
                                                <table id="treetable" class="table table-condensed table-hover table-striped fancytree-fade-expander table-bordered fancytree-container fancytree-ext-table fancytree-ext-glyph" tabindex="0" role="treegrid" aria-multiselectable="true" aria-readonly="true" aria-activedescendant="ui-id-6">
                                                    <colgroup>
                                                        <col width="7%">
                                                        <col width="*">
                                                        <col width="10%">
                                                        <col width="10%">
                                                    </colgroup>
                                                    <thead>
                                                        <tr>
                                                            <th style="text-align:end;color:white;">
                                                                <i id="lnkCollapseAll" class="fas fa-play" style="font-size:1rem;cursor:pointer;padding:3px;" title="Collapse All" name="nodes_collapse"></i>
                                                                <!--<input type="checkbox" title="Select\Deselect All" />-->
                                                                <i class="fas fa-window-close" style="font-size:1rem;cursor:pointer;padding:3px;color:white;" title="De-select All" id="iDeSelectAll"></i>
                                                            </th>
                                                            <th>Name</th>
                                                            <th>Status</th>
                                                            <th></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td></td>
                                                            <td></td>
                                                            <td></td>
                                                            <td class="alignCenter">
                                                                <i class="fa fa-edit" style="font-size:1rem;cursor:pointer;padding:5px;" title="Edit" name="node_edit"></i>
                                                                <!--<i class="fas fa-pencil-alt" style="font-size: 1rem;cursor: pointer;padding: 5px;" name="node_change_status" title="Change Status"></i>-->
                                                                <i class="fas fa-history" style=" font-size: 1rem;cursor: pointer;padding: 5px;" title="View History"></i>
                                                                <!--<i class="fa fa-trash text-danger" style="font-size:1rem;cursor:pointer;padding:5px;" name="node_delete" title="Delete"></i>-->
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                </div>

                <script src="/lib/jqueryui-1.12.1/jquery-ui.min.js"></script>
                <script src="/lib/bootstrap/dist/js/bootstrap.bundle.js"></script>
                <script src="/lib/jquery.ui-contextmenu/jquery.ui-contextmenu.min.js"></script>
                <script src="/Scripts/jquery.fancytree.js"></script>
                <script src="/Scripts/jquery.fancytree.dnd5.js"></script>
                <script src="/Scripts/jquery.fancytree.edit.js"></script>
                <script src="/Scripts/jquery.fancytree.glyph.js"></script>
                <script src="/Scripts/jquery.fancytree.table.js"></script>
                <script src="/Scripts/jquery.fancytree.wide.js"></script>

                <!-- <script type="text/javascript" src="/js/formulary.list.js"></script>
                <script type="text/javascript" src="/js/medication.js"></script>-->
                <script type="text/javascript" src="/Scripts/bootstrap-multiselect.js"></script>
                <script src="/js/studio.bootstrap4-toggle.js"></script>
                <script src="/htmls/mmc/js/samplescript.js"></script>

            </div>
            <!-- /page content -->
        </div>
    </div>
    <div id="pnlUpdateProgress" class="pageloader" style="opacity: 0.4; display: none;">
        <div class="loadingIcon">
            <img src="/img/loader.gif" )"="">
        </div>
    </div>
    <script src="/js/site.js?v=YP1m1X3g91nPH6pFgTdbbgNPSbcmk6vhdj4x-2GtIGA"></script>

    <script src="/_content/NToastNotify/toastr.js?something"></script>
    <script>
        if (nToastNotify) {
            nToastNotify.init({
                firstLoadEvent: 'DOMContentLoaded',
                messages: undefined,
                responseHeaderKey: 'X-NToastNotify-Messages',
                requestHeaderKey: 'X-Requested-With',
                libraryDetails: { "varName": "toastr", "scriptSrc": "https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js", "styleHref": "https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css", "options": { "positionClass": "toast-top-right", "progressBar": false, "type": "success" } },
                disableAjaxToasts: false
            });
        };
    </script>



    <ul class="ui-helper-hidden ui-contextmenu-custom ui-menu ui-widget ui-widget-content ui-menu-icons" id="ui-id-1" role="menu" tabindex="0" style="display: none;"><li data-command="edit" class="ui-menu-item"><div id="ui-id-2" tabindex="-1" role="menuitem" class="ui-menu-item-wrapper">Edit<span class="ui-icon fa fa-edit"></span></div></li><li data-command="change" class="ui-menu-item"><div id="ui-id-3" tabindex="-1" role="menuitem" class="ui-menu-item-wrapper">Change Status<span class="ui-icon ui-icon-pencil"></span></div></li><li data-command="delete" class="ui-menu-item"><div id="ui-id-4" tabindex="-1" role="menuitem" class="ui-menu-item-wrapper">Delete<span class="ui-icon fa fa-trash"></span></div></li><li class="ui-menu-divider ui-widget-content">----</li><li data-command="quit" class="ui-menu-item"><div id="ui-id-5" tabindex="-1" role="menuitem" class="ui-menu-item-wrapper">Quit<span class="ui-icon fa fa-times"></span></div></li></ul><div class="token-input-dropdown-facebook" style="display: none;"></div><div class="token-input-dropdown-facebook" style="display: none;"></div><div class="token-input-dropdown-facebook" style="display: none;"></div><div class="token-input-dropdown-facebook" style="display: none;"></div><div class="token-input-dropdown-facebook" style="display: none;"></div><div class="token-input-dropdown-facebook" style="display: none;"></div><div class="token-input-dropdown-facebook" style="display: none;"></div><div class="token-input-dropdown-facebook" style="display: none;"></div>

    <!----------------------Inspector Component VTM Starts------------------------------>
    <!-- Modal -->
    <div class="modal fade" id="inspectorModalEditor" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Edit Formulary</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="divinspectorcompscroll">
                        <div id="spinnerInseptor" style="display:none;">
                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                        </div>

                        <form id="updatecustomMedForm" novalidate="novalidate">
                            <div id="inspectorcomp" style="border: 1px solid rgba(0, 0, 0, 0.1);">
                                <style type="text/css">
                                    div.token-input-dropdown-facebook {
                                        /*z-index: 1051 !important;*/
                                        height: 200px !important;
                                        overflow-y: scroll !important;
                                        overflow-x: hidden !important;
                                    }

                                    .accordion-menu > button {
                                        display: block;
                                        position: relative;
                                    }

                                        .accordion-menu > button:after {
                                            content: "\f078"; /* fa-chevron-down */
                                            font-family: 'FontAwesome';
                                            position: absolute;
                                            right: 12px;
                                        }

                                        .accordion-menu > button[aria-expanded="true"]:after {
                                            content: "\f077"; /* fa-chevron-up */
                                        }

                                    .validation-summary-valid span {
                                        display: none;
                                    }
                                </style>
                                <link href="/lib/token-input-1.6.0/styles/token-input-facebook.css" rel="stylesheet" type="text/css">
                                <div class="text-danger validation-summary-valid" id="pnlMedicationValidationSmry" data-valmsg-summary="true">
                                    <span>Please correct the following errors</span>
                                    <ul>
                                        <li style="display:none"></li>
                                    </ul>
                                </div>
                                <script type="text/javascript">
                                    var rootCustomMedicationId = "Update_Custom_Medication";
                                    var rootCustomMedicationIdSelector = "#Update_Custom_Medication";
                                </script>
                                <div class="vtm-edit-medication root-vtm-edit-medication" id="Update_Custom_Medication">
                                    <div id="accordion">
                                        <div class="card">
                                            <div class="card-header" id="headingOne">
                                                <h5 class="mb-0 accordion-menu">
                                                    <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Update_Custom_Medication #productDetails" aria-expanded="true" aria-controls="productDetails">
                                                        <i class="fas fa-tablets"></i> Product Details
                                                    </button>
                                                </h5>
                                            </div>

                                            <div id="productDetails" class="collapse show" aria-labelledby="headingOne" data-parent="#Update_Custom_Medication #accordion">
                                                <div class="card-body">
                                                    <div class="form-group row">
                                                        <label for="name" class="col-sm-5 col-form-label">Name</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control" data-isreadonly="true" data-val="true" data-val-required="Please enter Name in Product Details" id="Name" name="Name" type="text" value="Albumin human" readonly="readonly">
                                                            <span class="field-validation-valid" data-valmsg-for="Name" data-valmsg-replace="true"></span>
                                                            <input data-val="true" data-val-required="The IsImported field is required." id="IsImported" name="IsImported" type="hidden" value="True">
                                                            <input id="RecSource" name="RecSource" type="hidden" value="I">
                                                            <input id="ControlIdentifier" name="ControlIdentifier" type="hidden" value="Update_Custom_Medication">
                                                            <input id="IsDuplicate" name="IsDuplicate" type="hidden" value="False">
                                                            <input id="DuplicateOfFormularyId" name="DuplicateOfFormularyId" type="hidden" value="">
                                                            <input id="ParentCode" name="ParentCode" type="hidden" value="">
                                                            <input id="ParentName" name="ParentName" type="hidden" value="">
                                                            <input id="ParentProductType" name="ParentProductType" type="hidden" value="">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="producttype" class="col-sm-5 col-form-label">Product Type</label>
                                                        <div class="col-sm-7">
                                                            <select class="form-control" data-val="true" data-val-required="Please select Product Type in Product Details" disabled="disabled" id="ProductType" name="ProductType">
                                                                <option value="">Please Select</option>
                                                                <option selected="selected" value="VTM">VTM</option>
                                                                <option value="VMP">VMP</option>
                                                                <option value="AMP">AMP</option>
                                                            </select><input id="Update_Custom_Medication_hdnProductType" name="ProductType" type="hidden" value="VTM">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="code" class="col-sm-5 col-form-label">Primary Code</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control" data-isreadonly="true" data-val="true" data-val-required="Please enter Code in Product Details" id="Code" name="Code" type="text" value="327830003" readonly="readonly">
                                                            <span class="field-validation-valid" data-valmsg-for="Code" data-valmsg-replace="true"></span>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="codesystem" class="col-sm-5 col-form-label">Primary Code System</label>
                                                        <div class="col-sm-7">
                                                            <input data-val="true" data-val-required="Please enter Code System in Product Details" id="hdnCodeSystem" name="CodeSystem" type="hidden" value="DMD"><input class="form-control" data-isreadonly="true" id="txtCodeSystem" name="CodeSystem" type="text" value="DMD" readonly="readonly">
                                                        </div>
                                                    </div>
                                                    <div class="card mb-2">
                                                        <div class="card-header">
                                                            <div class="h6">
                                                                Other Identification Codes
                                                                <div class="float-right">
                                                                    <label class="mr-2"><a href="#" class="add-identification-code" id="Update_Custom_Medication_btnAddIdentificationCode"><i class="fa fa-plus"></i></a></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card-body">
                                                            <div id="IdentificationCodeContainer" data-existingidentificationcode="[]" data-isreadonly="True">
                                                                <!--Add Identification Code Controls -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card mb-2">
                                                        <div class="card-header">
                                                            <div class="h6">
                                                                Classification Codes
                                                            </div>
                                                        </div>
                                                        <div class="card-body">
                                                            <div id="AdditionalCodeContainer" data-existingadditionalcode="[{&quot;FormularyVersionId&quot;:&quot;08459abf-b59d-4d74-a6ec-306433082707&quot;,&quot;AdditionalCode&quot;:&quot;0902022A0AAAKAK&quot;,&quot;AdditionalCodeSystem&quot;:&quot;BNF&quot;,&quot;AdditionalCodeDesc&quot;:null,&quot;Attr1&quot;:null,&quot;MetaJson&quot;:null,&quot;Source&quot;:&quot;DMD&quot;,&quot;CodeType&quot;:&quot;Classification&quot;,&quot;AdditionalProps&quot;:&quot;Source: DMD<br/>&quot;}]" data-isreadonly="True">
                                                                <!--Add Additional Code Controls -->
                                                                <div class="additionalCode">
                                                                    <div class="form-group row">
                                                                        <div class="col-sm-5">
                                                                            <select class="form-control" disabled="disabled" id="Update_Custom_Medication_AdditionalCodeSystem-0" name="AdditionalCodeSystem">
                                                                                <option value="">Please Select</option>
                                                                                <option value="BNF">BNF</option>
                                                                                <option value="ATC">ATC</option>
                                                                                <option value="FDB">FDB</option>
                                                                                <option value="CustomGroup">Custom Group</option>
                                                                            </select>
                                                                        </div>
                                                                        <div class="col-sm-5">
                                                                            <input type="text" name="AdditionalCode" class="form-control" id="Update_Custom_Medication_AdditionalCode-0" readonly="">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="licenseduse" class="col-sm-5 col-form-label">Licensed Indications</label>
                                                        <div class="col-sm-7">
                                                            <ul class="token-input-list-facebook"><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Treatment of hypovolaemia</p></li><li class="token-input-input-token-facebook"><input type="text" autocomplete="off" autocapitalize="off" id="token-input-Update_Custom_Medication_licensedUse" style="outline: none; width: 46px;"><tester style="position: absolute; top: -9999px; left: -9999px; width: auto; font-size: 12px; font-family: Verdana, sans-serif; font-weight: 400; letter-spacing: 0px; white-space: nowrap;"></tester></li></ul><input class="form-control studio-autocomplete" data-existingdata="[{&quot;id&quot;:&quot;3223&quot;,&quot;name&quot;:&quot;Treatment of hypovolaemia&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null}]" data-isdisabled="false" data-singleselect="false" id="Update_Custom_Medication_licensedUse" name="licensedUse" type="text" data-query-url="https://synapsestudio-demo.azurewebsites.net/Formulary/SearchIndication" style="display: none;">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="unlicenseduse" class="col-sm-5 col-form-label">Unlicensed Indications</label>
                                                        <div class="col-sm-7">
                                                            <ul class="token-input-list-facebook"><li class="token-input-input-token-facebook"><input type="text" autocomplete="off" autocapitalize="off" id="token-input-Update_Custom_Medication_unlicensedUse" style="outline: none; width: 46px;"><tester style="position: absolute; top: -9999px; left: -9999px; width: auto; font-size: 12px; font-family: Verdana, sans-serif; font-weight: 400; letter-spacing: 0px; white-space: nowrap;"></tester></li></ul><input class="form-control studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" id="Update_Custom_Medication_unlicensedUse" name="unlicensedUse" type="text" data-query-url="https://synapsestudio-demo.azurewebsites.net/Formulary/SearchIndication" style="display: none;">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header" id="headingTwo">
                                                <h5 class="mb-0 accordion-menu">
                                                    <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Update_Custom_Medication #posology" aria-expanded="false" aria-controls="posology">
                                                        <i class="fas fa-flask"></i> Posology
                                                    </button>
                                                </h5>
                                            </div>

                                            <div id="posology" class="collapse" aria-labelledby="headingTwo" data-parent="#Update_Custom_Medication #accordion">
                                                <div class="card-body">
                                                    <div class="form-group row">
                                                        <label for="maximumdosenumerator" class="col-sm-5 col-form-label">Maximum Dose Numerator</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control" id="MaximumDoseNumerator" name="MaximumDoseNumerator" type="text" value="">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="roundingfactor" class="col-sm-5 col-form-label">Rounding Factor</label>
                                                        <div class="col-sm-7">
                                                            <select class="form-control" id="RoundingFactor" name="RoundingFactor">
                                                                <option value="">Please Select</option>
                                                                <option value="001">0.5</option>
                                                                <option value="002">1</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="Route" class="col-sm-5 col-form-label">Route</label>
                                                        <div class="col-sm-7">
                                                            <ul class="token-input-list-facebook token-input-disabled-facebook"><li style="background-color:lightgray;" title="DMD" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Intravenous</p></li><li class="token-input-input-token-facebook"><input type="text" autocomplete="off" autocapitalize="off" id="token-input-Update_Custom_Medication_Route" disabled="disabled" style="outline: none; width: 14px;"><tester style="position: absolute; top: -9999px; left: -9999px; width: auto; font-size: 12px; font-family: Verdana, sans-serif; font-weight: 400; letter-spacing: 0px; white-space: nowrap;"></tester></li></ul><input class="form-control studio-autocomplete" data-existingdata="[{&quot;id&quot;:&quot;47625008&quot;,&quot;name&quot;:&quot;Intravenous&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;DMD&quot;,&quot;color&quot;:&quot;lightgray&quot;}]" data-isdisabled="True" data-singleselect="false" id="Update_Custom_Medication_Route" name="Route" type="text" value="System.Collections.Generic.List`1[SynapseStudioWeb.Models.MedicinalMgmt.CodeNameSelectorModel]" disabled="disabled" style="display: none;">
                                                            <span class="field-validation-valid" data-valmsg-for="Route" data-valmsg-replace="true"></span>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="unlicensedroute" class="col-sm-5 col-form-label">Unlicensed Route</label>
                                                        <div class="col-sm-7">
                                                            <ul class="token-input-list-facebook token-input-disabled-facebook"><li class="token-input-input-token-facebook"><input type="text" autocomplete="off" autocapitalize="off" id="token-input-Update_Custom_Medication_unlicensedRoute" disabled="disabled" style="outline: none; width: 14px;"><tester style="position: absolute; top: -9999px; left: -9999px; width: auto; font-size: 12px; font-family: Verdana, sans-serif; font-weight: 400; letter-spacing: 0px; white-space: nowrap;"></tester></li></ul><input class="form-control studio-autocomplete" data-existingdata="[]" data-singleselect="false" data-isdisabled="true" id="Update_Custom_Medication_unlicensedRoute" name="unlicensedRoute" type="text" disabled="disabled" style="display: none;">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header" id="headingThree">
                                                <h5 class="mb-0 accordion-menu">
                                                    <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Update_Custom_Medication #guidance" aria-expanded="false" aria-controls="guidance">
                                                        <i class="fas fa-book-reader"></i> Guidance
                                                    </button>
                                                </h5>
                                            </div>

                                            <div id="guidance" class="collapse" aria-labelledby="headingThree" data-parent="#Update_Custom_Medication #accordion">
                                                <div class="card-body">
                                                    <div class="form-group row">
                                                        <label for="contraindications" class="col-sm-5 col-form-label">Contraindications</label>
                                                        <div class="col-sm-7">
                                                            <ul class="token-input-list-facebook token-input-disabled-facebook"><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Cardiac failure</p></li><li class="token-input-input-token-facebook"><input type="text" autocomplete="off" autocapitalize="off" id="token-input-Update_Custom_Medication_contraindications" disabled="disabled" style="outline: none; width: 14px;"><tester style="position: absolute; top: -9999px; left: -9999px; width: auto; font-size: 12px; font-family: Verdana, sans-serif; font-weight: 400; letter-spacing: 0px; white-space: nowrap;"></tester></li></ul><input class="form-control studio-autocomplete" data-existingdata="[{&quot;id&quot;:&quot;60&quot;,&quot;name&quot;:&quot;Cardiac failure&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null}]" data-isdisabled="true" data-singleselect="false" id="Update_Custom_Medication_contraindications" name="contraindications" type="text" disabled="disabled" style="display: none;">
                                                        </div>
                                                    </div>
                                                    <div class="card mb-2">
                                                        <div class="card-header">
                                                            <div class="h6">
                                                                Custom Warnings
                                                                <div class="float-right">
                                                                    <label class="mr-2"><a href="#" class="add-custom-warning" id="Update_Custom_Medication_btnAddCustomWarning"><i class="fa fa-plus"></i></a></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card-body">
                                                            <div id="CustomWarningContainer" data-existingcustomwarning="[]">
                                                                <!--Add Custom Warning Controls -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card mb-2">
                                                        <div class="card-header">
                                                            <div class="h6">
                                                                Endorsements
                                                                <div class="float-right">
                                                                    <label class="mr-2"><a href="#" class="add-endorsement" id="Update_Custom_Medication_btnAddEndorsement"><i class="fa fa-plus"></i></a></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card-body">
                                                            <div id="EndorsementContainer" data-existingendorsements="[]">
                                                                <!--Add Endorsement Controls -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="safetyMessages" class="col-sm-5 col-form-label">Important Safety Information</label>
                                                        <div class="col-sm-7">
                                                            <ul class="token-input-list-facebook token-input-disabled-facebook"><li class="token-input-input-token-facebook"><input type="text" autocomplete="off" autocapitalize="off" id="token-input-Update_Custom_Medication_safetyMessages" disabled="disabled" style="outline: none; width: 14px;"><tester style="position: absolute; top: -9999px; left: -9999px; width: auto; font-size: 12px; font-family: Verdana, sans-serif; font-weight: 400; letter-spacing: 0px; white-space: nowrap;"></tester></li></ul><input class="form-control studio-autocomplete" data-singleselect="false" data-existingdata="[]" data-isdisabled="true" id="Update_Custom_Medication_safetyMessages" name="safetyMessages" type="text" disabled="disabled" style="display: none;">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="medusapreparationinstructions" class="col-sm-5 col-form-label">Medusa Preparation Instructions</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control" id="MedusaPreparationInstructions" name="MedusaPreparationInstructions" type="text" value="">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="niceta" class="col-sm-5 col-form-label">NICE TA</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control" id="NICETA" name="NICETA" type="text" value="">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="notesforrestriction" class="col-sm-5 col-form-label">Notes for Restriction</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control" id="NotesForRestriction" name="NotesForRestriction" type="text" value="Available from Pathology">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="sideeffects" class="col-sm-5 col-form-label">Side Effects</label>
                                                        <div class="col-sm-7">
                                                            <ul class="token-input-list-facebook"><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Hypersensitivity reactions</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Anaphylaxis</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Shock</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Nausea</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Fever</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Chills</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Flushing</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Urticaria</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Tachycardia</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Hypotension</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Rigors</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Hypertension</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Tremor</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Bronchospasm</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Dyspnoea</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Chest tightness</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Stridor</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Dizziness</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Confusion</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Headache</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Erythematous rash</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Hyperhidrosis</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Bradycardia</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Pulmonary oedema</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Angioneurotic oedema</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Sensation of cold</p></li><li class="token-input-input-token-facebook"><input type="text" autocomplete="off" autocapitalize="off" id="token-input-Update_Custom_Medication_sideEffects" style="outline: none; width: 14px;"><tester style="position: absolute; top: -9999px; left: -9999px; width: auto; font-size: 12px; font-family: Verdana, sans-serif; font-weight: 400; letter-spacing: 0px; white-space: nowrap;"></tester></li></ul><input class="form-control studio-autocomplete" data-existingdata="[{&quot;id&quot;:&quot;Hypersensitivity reactions&quot;,&quot;name&quot;:&quot;Hypersensitivity reactions&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Anaphylaxis&quot;,&quot;name&quot;:&quot;Anaphylaxis&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Shock&quot;,&quot;name&quot;:&quot;Shock&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Nausea&quot;,&quot;name&quot;:&quot;Nausea&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Fever&quot;,&quot;name&quot;:&quot;Fever&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Chills&quot;,&quot;name&quot;:&quot;Chills&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Flushing&quot;,&quot;name&quot;:&quot;Flushing&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Urticaria&quot;,&quot;name&quot;:&quot;Urticaria&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Tachycardia&quot;,&quot;name&quot;:&quot;Tachycardia&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Hypotension&quot;,&quot;name&quot;:&quot;Hypotension&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Rigors&quot;,&quot;name&quot;:&quot;Rigors&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Hypertension&quot;,&quot;name&quot;:&quot;Hypertension&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Tremor&quot;,&quot;name&quot;:&quot;Tremor&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Bronchospasm&quot;,&quot;name&quot;:&quot;Bronchospasm&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Dyspnoea&quot;,&quot;name&quot;:&quot;Dyspnoea&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Chest tightness&quot;,&quot;name&quot;:&quot;Chest tightness&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Stridor&quot;,&quot;name&quot;:&quot;Stridor&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Dizziness&quot;,&quot;name&quot;:&quot;Dizziness&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Confusion&quot;,&quot;name&quot;:&quot;Confusion&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Headache&quot;,&quot;name&quot;:&quot;Headache&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Erythematous rash&quot;,&quot;name&quot;:&quot;Erythematous rash&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Hyperhidrosis&quot;,&quot;name&quot;:&quot;Hyperhidrosis&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Bradycardia&quot;,&quot;name&quot;:&quot;Bradycardia&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Pulmonary oedema&quot;,&quot;name&quot;:&quot;Pulmonary oedema&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Angioneurotic oedema&quot;,&quot;name&quot;:&quot;Angioneurotic oedema&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Sensation of cold&quot;,&quot;name&quot;:&quot;Sensation of cold&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null}]" data-data-isdisabled="true" singleselect="false" id="Update_Custom_Medication_sideEffects" name="sideEffects" type="text" style="display: none;">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header" id="headingFour">
                                                <h5 class="mb-0 accordion-menu">
                                                    <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Update_Custom_Medication #flagsClassification" aria-expanded="false" aria-controls="flagsClassification">
                                                        <i class="fas fa-flag"></i> Flags / Classification
                                                    </button>
                                                </h5>
                                            </div>

                                            <div id="flagsClassification" class="collapse" aria-labelledby="headingFour" data-parent="#Update_Custom_Medication #accordion">
                                                <div class="card-body">
                                                    <div class="form-group row">
                                                        <label for="antibiotic" class="col-sm-5 col-form-label">Antibiotic</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The Antibiotic field is required." id="Antibiotic" name="Antibiotic" type="checkbox" value="true"><div class="toggle-group"><label for="Antibiotic" class="btn btn-success btn-sm toggle-on">Yes</label><label for="Antibiotic" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="Antibiotic" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="anticoagulant" class="col-sm-5 col-form-label">Anticoagulant</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The Anticoagulant field is required." id="Anticoagulant" name="Anticoagulant" type="checkbox" value="true"><div class="toggle-group"><label for="Anticoagulant" class="btn btn-success btn-sm toggle-on">Yes</label><label for="Anticoagulant" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="Anticoagulant" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="antipsychotic" class="col-sm-5 col-form-label">Antipsychotic</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The Antipsychotic field is required." id="Antipsychotic" name="Antipsychotic" type="checkbox" value="true"><div class="toggle-group"><label for="Antipsychotic" class="btn btn-success btn-sm toggle-on">Yes</label><label for="Antipsychotic" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="Antipsychotic" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="antimicrobial" class="col-sm-5 col-form-label">Antimicrobial</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The Antimicrobial field is required." id="Antimicrobial" name="Antimicrobial" type="checkbox" value="true"><div class="toggle-group"><label for="Antimicrobial" class="btn btn-success btn-sm toggle-on">Yes</label><label for="Antimicrobial" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="Antimicrobial" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="blacktriangle" class="col-sm-5 col-form-label">Black Triangle</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The BlackTriangle field is required." id="BlackTriangle" name="BlackTriangle" type="checkbox" value="true"><div class="toggle-group"><label for="BlackTriangle" class="btn btn-success btn-sm toggle-on">Yes</label><label for="BlackTriangle" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="BlackTriangle" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="cautions" class="col-sm-5 col-form-label">Cautions</label>
                                                        <div class="col-sm-7">
                                                            <ul class="token-input-list-facebook"><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Discontinue if allergic reaction occurs</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Discontinue if anaphylactoid reaction occurs</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Management of cases of shock should follow current medical standards</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor to prevent hypervolaemia</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor to prevent cardiovascular overload</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Stop infusion immediately if symptoms of cardiovascular overload appear</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Discontinue if rise in blood pressure occurs</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Discontinue if pulmonary oedema occurs</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor haematocrit values</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Derived from human proteins - transmission of infective agents possible</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Record name and batch number of administered product</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor blood pressure</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor central venous pressure</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor urine output</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor serum electrolytes</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor haemoglobin levels</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor coagulation values</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor respiratory function</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor patients with cardiovascular disease</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Maintain adequate hydration during therapy</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Restore electrolyte &amp; fluid balance in case of dehydration</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Sodium content of formulation may be significant</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor fluid balance</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Monitor heart rate</p></li><li style="background-color:lightgray;" title="FDB" class="token-input-token-readonly-facebook token-input-token-facebook"><p>Consider hepatitis A &amp; B vaccinations if patient receives product regularly</p></li><li class="token-input-input-token-facebook"><input type="text" autocomplete="off" autocapitalize="off" id="token-input-Update_Custom_Medication_cautions" style="outline: none; width: 14px;"><tester style="position: absolute; top: -9999px; left: -9999px; width: auto; font-size: 12px; font-family: Verdana, sans-serif; font-weight: 400; letter-spacing: 0px; white-space: nowrap;"></tester></li></ul><input class="form-control studio-autocomplete" data-existingdata="[{&quot;id&quot;:&quot;Discontinue if allergic reaction occurs&quot;,&quot;name&quot;:&quot;Discontinue if allergic reaction occurs&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Discontinue if anaphylactoid reaction occurs&quot;,&quot;name&quot;:&quot;Discontinue if anaphylactoid reaction occurs&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Management of cases of shock should follow current medical standards&quot;,&quot;name&quot;:&quot;Management of cases of shock should follow current medical standards&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor to prevent hypervolaemia&quot;,&quot;name&quot;:&quot;Monitor to prevent hypervolaemia&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor to prevent cardiovascular overload&quot;,&quot;name&quot;:&quot;Monitor to prevent cardiovascular overload&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Stop infusion immediately if symptoms of cardiovascular overload appear&quot;,&quot;name&quot;:&quot;Stop infusion immediately if symptoms of cardiovascular overload appear&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Discontinue if rise in blood pressure occurs&quot;,&quot;name&quot;:&quot;Discontinue if rise in blood pressure occurs&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Discontinue if pulmonary oedema occurs&quot;,&quot;name&quot;:&quot;Discontinue if pulmonary oedema occurs&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor haematocrit values&quot;,&quot;name&quot;:&quot;Monitor haematocrit values&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Derived from human proteins - transmission of infective agents possible&quot;,&quot;name&quot;:&quot;Derived from human proteins - transmission of infective agents possible&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Record name and batch number of administered product&quot;,&quot;name&quot;:&quot;Record name and batch number of administered product&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor blood pressure&quot;,&quot;name&quot;:&quot;Monitor blood pressure&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor central venous pressure&quot;,&quot;name&quot;:&quot;Monitor central venous pressure&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor urine output&quot;,&quot;name&quot;:&quot;Monitor urine output&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor serum electrolytes&quot;,&quot;name&quot;:&quot;Monitor serum electrolytes&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor haemoglobin levels&quot;,&quot;name&quot;:&quot;Monitor haemoglobin levels&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor coagulation values&quot;,&quot;name&quot;:&quot;Monitor coagulation values&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor respiratory function&quot;,&quot;name&quot;:&quot;Monitor respiratory function&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor patients with cardiovascular disease&quot;,&quot;name&quot;:&quot;Monitor patients with cardiovascular disease&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Maintain adequate hydration during therapy&quot;,&quot;name&quot;:&quot;Maintain adequate hydration during therapy&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Restore electrolyte &amp; fluid balance in case of dehydration&quot;,&quot;name&quot;:&quot;Restore electrolyte &amp; fluid balance in case of dehydration&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Sodium content of formulation may be significant&quot;,&quot;name&quot;:&quot;Sodium content of formulation may be significant&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor fluid balance&quot;,&quot;name&quot;:&quot;Monitor fluid balance&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Monitor heart rate&quot;,&quot;name&quot;:&quot;Monitor heart rate&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null},{&quot;id&quot;:&quot;Consider hepatitis A &amp; B vaccinations if patient receives product regularly&quot;,&quot;name&quot;:&quot;Consider hepatitis A &amp; B vaccinations if patient receives product regularly&quot;,&quot;readonly&quot;:true,&quot;datasource&quot;:&quot;FDB&quot;,&quot;color&quot;:null}]" data-data-isdisabled="true" singleselect="false" id="Update_Custom_Medication_cautions" name="cautions" type="text" style="display: none;">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="clinicaltrialmedication" class="col-sm-5 col-form-label">Clinical Trial Medication</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The ClinicalTrialMedication field is required." id="ClinicalTrialMedication" name="ClinicalTrialMedication" type="checkbox" value="true"><div class="toggle-group"><label for="ClinicalTrialMedication" class="btn btn-success btn-sm toggle-on">Yes</label><label for="ClinicalTrialMedication" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="ClinicalTrialMedication" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="criticaldrug" class="col-sm-5 col-form-label">Critical Drug</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The CriticalDrug field is required." id="CriticalDrug" name="CriticalDrug" type="checkbox" value="true"><div class="toggle-group"><label for="CriticalDrug" class="btn btn-success btn-sm toggle-on">Yes</label><label for="CriticalDrug" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="CriticalDrug" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="cytotoxic" class="col-sm-5 col-form-label">Cytotoxic</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The Cytotoxic field is required." id="Cytotoxic" name="Cytotoxic" type="checkbox" value="true"><div class="toggle-group"><label for="Cytotoxic" class="btn btn-success btn-sm toggle-on">Yes</label><label for="Cytotoxic" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="Cytotoxic" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="emaadditionalmonitoring" class="col-sm-5 col-form-label">Expensive Medication</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The ExpensiveMedication field is required." id="ExpensiveMedication" name="ExpensiveMedication" type="checkbox" value="true"><div class="toggle-group"><label for="ExpensiveMedication" class="btn btn-success btn-sm toggle-on">Yes</label><label for="ExpensiveMedication" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="ExpensiveMedication" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="highalertmedication" class="col-sm-5 col-form-label">High Alert Medication</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The HighAlertMedication field is required." id="HighAlertMedication" name="HighAlertMedication" type="checkbox" value="true"><div class="toggle-group"><label for="HighAlertMedication" class="btn btn-success btn-sm toggle-on">Yes</label><label for="HighAlertMedication" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="HighAlertMedication" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="ivtooral" class="col-sm-5 col-form-label">IV to Oral</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The IVToOral field is required." id="IVToOral" name="IVToOral" type="checkbox" value="true"><div class="toggle-group"><label for="IVToOral" class="btn btn-success btn-sm toggle-on">Yes</label><label for="IVToOral" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="IVToOral" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="orderable" class="col-sm-5 col-form-label">Orderable</label>
                                                        <div class="col-sm-7">
                                                            <select class="form-control" data-val="true" data-val-required="Please select Orderable in Flags / Classification" id="Orderable" name="Orderable">
                                                                <option value="">Please Select</option>
                                                                <option value="000">Not Orderable</option>
                                                                <option value="001">Orderable</option>
                                                            </select>
                                                            <span class="field-validation-valid" data-valmsg-for="Orderable" data-valmsg-replace="true"></span>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="outpatientmedication" class="col-sm-5 col-form-label">Outpatient Medication</label>
                                                        <div class="col-sm-7">
                                                            <input data-val="true" data-val-required="The OutpatientMedication field is required." id="outpatientYes" name="OutpatientMedication" type="radio" value="True"> Yes
                                                            <input checked="checked" id="outpatientNo" name="OutpatientMedication" type="radio" value="False"> No
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="titrationtype" class="col-sm-5 col-form-label">Titration Type</label>
                                                        <div class="col-sm-7">
                                                            <select class="form-control" id="TitrationType" name="TitrationType">
                                                                <option value="">Please Select</option>
                                                                <option value="001">Blood Sugar</option>
                                                                <option value="002">INR</option>
                                                                <option value="003">MAP</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="unlicensedmedication" class="col-sm-5 col-form-label">Unlicensed Medication</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The UnlicensedMedication field is required." id="UnlicensedMedication" name="UnlicensedMedication" type="checkbox" value="true"><div class="toggle-group"><label for="UnlicensedMedication" class="btn btn-success btn-sm toggle-on">Yes</label><label for="UnlicensedMedication" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="UnlicensedMedication" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header" id="headingFive">
                                                <h5 class="mb-0 accordion-menu">
                                                    <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Update_Custom_Medication #history" aria-expanded="false" aria-controls="history">
                                                        <i class="fas fa-history"></i> History
                                                    </button>
                                                </h5>
                                            </div>

                                            <div id="history" class="collapse" aria-labelledby="headingFive" data-parent="#Update_Custom_Medication #accordion">
                                                <div class="card-body">
                                                    <div class="form-group row">
                                                        <label for="id" class="col-sm-5 col-form-label">ID</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control" data-isreadonly="true" id="FormularyVersionId" name="FormularyVersionId" type="text" value="1a9f162e-c578-41da-a7a0-bb5e7d130d55" readonly="readonly">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="status" class="col-sm-5 col-form-label">Status</label>
                                                        <div class="col-sm-7">
                                                            <select class="form-control" data-val="true" data-val-required="Please select Status in History" id="Update_Custom_Medication_ddlRecordStatus" name="Status">
                                                                <option selected="selected" value="001">Draft</option>
                                                                <option value="002">Approve</option>
                                                            </select>
                                                            <input id="OriginalStatus" name="OriginalStatus" type="hidden" value="001">
                                                        </div>
                                                    </div>
                                                    <div id="Update_Custom_Medication_pnlReason" data-initialstatus="001" class="form-group row" style="display: none;">
                                                        <label class="col-sm-5 col-form-label">Reason</label>
                                                        <div class="col-sm-7">
                                                            <textarea class="form-control" id="RecStatuschangeMsg" name="RecStatuschangeMsg"></textarea>
                                                            <span class="field-validation-valid" data-valmsg-for="RecStatuschangeMsg" data-valmsg-replace="true"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header" id="headingSix">
                                                <h5 class="mb-0 accordion-menu">
                                                    <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Update_Custom_Medication #preferences" aria-expanded="false" aria-controls="preferences">
                                                        <i class="fas fa-cogs"></i> Preferences
                                                    </button>
                                                </h5>
                                            </div>
                                            <div id="preferences" class="collapse" aria-labelledby="headingSix" data-parent="#Update_Custom_Medication #accordion">
                                                <div class="card-body">
                                                    <div class="form-group row">
                                                        <label for="formularystatus" class="col-sm-5 col-form-label">Formulary Status</label>
                                                        <div class="col-sm-7">
                                                            <select class="form-control" data-val="true" data-val-required="Please select Formulary Status in Preferences" id="FormularyStatus" name="FormularyStatus">
                                                                <option value="">Please Select</option>
                                                                <option selected="selected" value="001">Formulary</option>
                                                                <option value="002">Non-Formulary</option>
                                                            </select>
                                                            <span class="field-validation-valid" data-valmsg-for="FormularyStatus" data-valmsg-replace="true"></span>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="ignoreduplicatewarnings" class="col-sm-5 col-form-label">Ignore Duplicate Warnings</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The IgnoreDuplicateWarnings field is required." id="IgnoreDuplicateWarnings" name="IgnoreDuplicateWarnings" type="checkbox" value="true"><div class="toggle-group"><label for="IgnoreDuplicateWarnings" class="btn btn-success btn-sm toggle-on">Yes</label><label for="IgnoreDuplicateWarnings" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="IgnoreDuplicateWarnings" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="witnessingrequired" class="col-sm-5 col-form-label">Witnessing Required</label>
                                                        <div class="col-sm-7">
                                                            <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The WitnessingRequired field is required." id="WitnessingRequired" name="WitnessingRequired" type="checkbox" value="true"><div class="toggle-group"><label for="WitnessingRequired" class="btn btn-success btn-sm toggle-on">Yes</label><label for="WitnessingRequired" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="WitnessingRequired" type="hidden" value="false">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div id="Update_Custom_Medication_identificationCodeTmpl" disabled="" style="display:none;">
                                    <!--Add Identification Code Controls -->
                                    <div class="identificationCode">
                                        <div class="form-group row">
                                            <div class="col-sm-5">
                                                <select class="form-control" id="Update_Custom_Medication_IdentificationCodeSystem-{0}" name="IdentificationCodeSystem">
                                                    <option value="">Please Select</option>
                                                    <option value="DMD">DMD</option>
                                                    <option value="Custom">Custom</option>
                                                </select>
                                                <span class="field-validation-valid" data-valmsg-for="IdentificationCodeSystem" data-valmsg-replace="true" id="Update_Custom_Medication_IdentificationCodeSystem-{0}"></span>
                                            </div>
                                            <div class="col-sm-5">
                                                <input type="text" name="IdentificationCode" class="form-control" id="Update_Custom_Medication_IdentificationCode-{0}">
                                                <span class="field-validation-valid" data-valmsg-for="IdentificationCode" data-valmsg-replace="true" id="Update_Custom_Medication_IdentificationCode-{0}"></span>
                                            </div>
                                            <div class="col-sm-1">
                                                <button id="Update_Custom_Medication_btnRemoveIdentificationCode-{0}" class="btn btn-sm btn-danger remove-identification-code"><span>Ã</span></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <script type="text/javascript">
                                    $('.remove-identification-code').click(function () {
                                        $(this).parent().parent().parent().remove();
                                    });
                                </script>


                                <div id="Update_Custom_Medication_additionalCodeDisabledTmpl" disabled="" style="display:none;">
                                    <!--Add Additional Code Controls -->
                                    <div class="additionalCode">
                                        <div class="form-group row">
                                            <div class="col-sm-5">
                                                <select class="form-control" disabled="disabled" id="Update_Custom_Medication_AdditionalCodeSystem-{0}" name="AdditionalCodeSystem">
                                                    <option value="">Please Select</option>
                                                    <option value="BNF">BNF</option>
                                                    <option value="ATC">ATC</option>
                                                    <option value="FDB">FDB</option>
                                                    <option value="CustomGroup">Custom Group</option>
                                                </select>
                                            </div>
                                            <div class="col-sm-5">
                                                <input type="text" name="AdditionalCode" class="form-control" id="Update_Custom_Medication_AdditionalCode-{0}" readonly="">
                                            </div>
                                        </div>
                                    </div>
                                </div>



                                <div id="Update_Custom_Medication_customWarningTmpl" disabled="" style="display:none;">
                                    <!--Add Ingredient Code Controls -->
                                    <div class="custom-warning">
                                        <div class="form-group row">
                                            <div class="col-sm-6">
                                                <textarea name="CustomWarning" class="form-control" id="Update_Custom_Medication_txtCustomWarning-{0}" maxlength="255"></textarea>
                                                <span class="field-validation-valid" data-valmsg-for="CustomWarning" data-valmsg-replace="true" id="Update_Custom_Medication_txtCustomWarning-{0}"></span>
                                            </div>
                                            <div class="col-sm-5">
                                                <label for="needresponse" class="col-sm-7 col-form-label">Need Response</label>
                                                <input type="checkbox" name="needresponse" class="col-sm-2 form-control" id="Update_Custom_Medication_chkNeedResponse-{0}">
                                            </div>
                                            <div class="col-sm-1">
                                                <button id="Update_Custom_Medication_btnRemoveCustomWarning-{0}" class="btn btn-sm btn-danger remove-custom-warning"><span>Ã</span></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <script type="text/javascript">
                                    $('.remove-custom-warning').click(function () {
                                        $(this).parent().parent().parent().remove();
                                    });
                                </script>


                                <div id="Update_Custom_Medication_endorsementTmpl" disabled="" style="display:none;">
                                    <!--Add Endorsement Controls -->
                                    <div class="endorsement">
                                        <div class="form-group row">
                                            <div class="col-sm-10">
                                                <textarea name="Endorsement" class="form-control" id="Update_Custom_Medication_txtEndorsement-{0}" maxlength="255"></textarea>
                                                <span class="field-validation-valid" data-valmsg-for="Endorsement" data-valmsg-replace="true" id="Update_Custom_Medication_txtEndorsement-{0}"></span>
                                            </div>
                                            <div class="col-sm-1">
                                                <button id="Update_Custom_Medication_btnEndorsement-{0}" class="btn btn-sm btn-danger remove-endorsement"><span>Ã</span></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <script type="text/javascript">
                                    $('.remove-endorsement').click(function () {
                                        $(this).parent().parent().parent().remove();
                                    });
                                </script>

                                <script type="text/javascript" src="/lib/token-input-1.6.0/src/jquery.tokeninput.js"></script>
                                <script type="text/javascript">

                                    $(document).ready(function () {

                                        setTimeout(() => {
                                            let inputs = $(".vtm-edit-medication :input");
                                            if (inputs && inputs.length > 0) {
                                                inputs.each(function (indx, el) {
                                                    let isReadOnly = $(this).data('isreadonly');
                                                    if (isReadOnly == true) $(this).attr('readonly', true);
                                                });
                                            }
                                        }, 100);

                                        initAdditionalCodes('#Update_Custom_Medication');

                                        initIdentificationCodes('#Update_Custom_Medication');

                                        initCustomWarnings('#Update_Custom_Medication');

                                        initEndorsements('#Update_Custom_Medication');

                                        let rootCntrl = '#Update_Custom_Medication';

                                        let recStatusCntrolId = `${rootCntrl}_pnlReason`;
                                        onRecordStatusChange(recStatusCntrolId, $(recStatusCntrolId).data('initialstatus'));

                                        $(`${rootCntrl}_ddlRecordStatus`).on('change', function () {
                                            let rootCntrl = '#Update_Custom_Medication';
                                            let recStatusCntrolId = `${rootCntrl}_pnlReason`;
                                            onRecordStatusChange(recStatusCntrolId, $(this).val());
                                        });

                                        $(`${rootCntrl} :checkbox`).bootstrapToggle('destroy');

                                        setTimeout(() => {
                                            $(`${rootCntrl} :checkbox`).bootstrapToggle({
                                                on: 'Yes',
                                                off: 'No',
                                                onstyle: 'success',
                                                offstyle: 'danger',
                                                width: 70,
                                                size: 'sm'
                                            });
                                        }, 100);

                                        var cautions = new studio.AutoComplete(`${rootCntrl}_cautions`, null, null, null, { allowFreeTagging: true });
                                        cautions.init();

                                        var contraindications = new studio.AutoComplete(`${rootCntrl}_contraindications`, null, null, null, { disabled: true });
                                        contraindications.init();

                                        var sideEffects = new studio.AutoComplete(`${rootCntrl}_sideEffects`, null, null, null, { allowFreeTagging: true });
                                        sideEffects.init();

                                        var impSafetyInfo = new studio.AutoComplete(`${rootCntrl}_safetyMessages`, null, null, null, { allowFreeTagging: true });
                                        impSafetyInfo.init();

                                        var licensedUse = new studio.AutoComplete(`${rootCntrl}_licensedUse`, null, null, null, {});
                                        licensedUse.init();

                                        var unlicensedUse = new studio.AutoComplete(`${rootCntrl}_unlicensedUse`, null, null, null, {});
                                        unlicensedUse.init();

                                        let routeAutoComplete = new studio.AutoComplete(`${rootCntrl}_Route`);
                                        routeAutoComplete.init();

                                        let unlicensedRouteAutoComplete = new studio.AutoComplete(`${rootCntrl}_unlicensedRoute`);
                                        unlicensedRouteAutoComplete.init();

                                        $(`${rootCntrl}_btnAddEndorsement`).click(function () {

                                            let rootEl = $(this).closest('.root-vtm-edit-medication');
                                            let roolElId = $(rootEl).attr('id');
                                            let endorsementElSel = `#${roolElId} #EndorsementContainer`;

                                            let currIndex = $(endorsementElSel).data('currindex');
                                            if (currIndex === undefined || currIndex === null) currIndex = 0;
                                            else currIndex = currIndex + 1;

                                            var template = $.validator.format($.trim($(`#${roolElId}_endorsementTmpl`).html()));
                                            $(template(currIndex)).appendTo(endorsementElSel);
                                            $(endorsementElSel).data('currindex', currIndex);
                                        });

                                        $(`${rootCntrl}_btnAddCustomWarning`).click(function () {

                                            let rootEl = $(this).closest('.root-vtm-edit-medication');
                                            let roolElId = $(rootEl).attr('id');
                                            let customWarningContainerElSel = `#${roolElId} #CustomWarningContainer`;

                                            let currIndex = $(customWarningContainerElSel).data('currindex');
                                            if (currIndex === undefined || currIndex === null) currIndex = 0;
                                            else currIndex = currIndex + 1;

                                            var cwTemplate = $.validator.format($.trim($(`#${roolElId}_customWarningTmpl`).html()));
                                            $(cwTemplate(currIndex)).appendTo(customWarningContainerElSel);
                                            $(customWarningContainerElSel).data('currindex', currIndex);
                                        });

                                        $(`${rootCntrl}_btnAddIdentificationCode`).click(function () {

                                            let rootEl = $(this).closest('.root-vtm-edit-medication');
                                            let roolElId = $(rootEl).attr('id');
                                            let idenContainerElSel = `#${roolElId} #IdentificationCodeContainer`;

                                            let currIndex = $(idenContainerElSel).data('currindex');
                                            if (currIndex === undefined || currIndex === null) currIndex = 0;
                                            else currIndex = currIndex + 1;

                                            var indicationCodeTemplate = $.validator.format($.trim($(`#${roolElId}_identificationCodeTmpl`).html()));
                                            $(indicationCodeTemplate(currIndex)).appendTo(idenContainerElSel);
                                            $(idenContainerElSel).data('currindex', currIndex);
                                        });
                                    });



                                    function initIdentificationCodes(rootCntrlSel) {

                                        let idenContainerElSel = `${rootCntrlSel} #IdentificationCodeContainer`;

                                        let idenCodeTmplSel = `${rootCntrlSel}_identificationCodeTmpl`;

                                        let existingIdentCode = $(idenContainerElSel).data('existingidentificationcode');

                                        if (existingIdentCode && existingIdentCode.length > 0) {

                                            $(idenContainerElSel).html("");

                                            existingIdentCode.forEach(function (item, index) {
                                                //var addlCodeTemplate = (item && item.Source && item.Source === 'M') ? $.validator.format($.trim($(addlCodeTmplSel).html())) : $.validator.format($.trim($(addlCodeDisabledTmplSel).html()));
                                                var idenCodeTemplate = $.validator.format($.trim($(idenCodeTmplSel).html()));

                                                $(idenCodeTemplate(index)).appendTo(idenContainerElSel);

                                                $(`${rootCntrlSel}_IdentificationCode-${index}`).val(item.AdditionalCode);
                                                $(`${rootCntrlSel}_IdentificationCodeSystem-${index}`).val(item.AdditionalCodeSystem);

                                                $(idenContainerElSel).data('currindex', index);
                                            });
                                        }
                                    }

                                    function initEndorsements(rootCntrlSel) {

                                        let containerElSel = `${rootCntrlSel} #EndorsementContainer`;

                                        let tmplSel = `${rootCntrlSel}_endorsementTmpl`;

                                        let existingData = $(containerElSel).data('existingendorsements');

                                        if (existingData && existingData.length > 0) {

                                            $(containerElSel).html("");

                                            existingData.forEach(function (item, index) {
                                                let template = $.validator.format($.trim($(tmplSel).html()));

                                                $(template(index)).appendTo(containerElSel);

                                                $(`${rootCntrlSel}_txtEndorsement-${index}`).val(item);

                                                $(containerElSel).data('currindex', index);
                                            });
                                        }
                                    }

                                    function initCustomWarnings(rootCntrlSel) {

                                        let cwContainerElSel = `${rootCntrlSel} #CustomWarningContainer`;

                                        let cwTmplSel = `${rootCntrlSel}_customWarningTmpl`;

                                        let existingCW = $(cwContainerElSel).data('existingcustomwarning');

                                        if (existingCW && existingCW.length > 0) {

                                            $(cwContainerElSel).html("");

                                            existingCW.forEach(function (item, index) {
                                                let cwTemplate = $.validator.format($.trim($(cwTmplSel).html()));

                                                $(cwTemplate(index)).appendTo(cwContainerElSel);

                                                $(`${rootCntrlSel}_txtCustomWarning-${index}`).val(item.Warning);
                                                $(`${rootCntrlSel}_chkNeedResponse-${index}`).val(item.NeedResponse);

                                                $(cwContainerElSel).data('currindex', index);
                                            });
                                        }
                                    }

                                    function initEndorsements(rootCntrlSel) {

                                        let endorsementContainerElSel = `${rootCntrlSel} #EndorsementContainer`;

                                        let endorsementTmplSel = `${rootCntrlSel}_endorsementTmpl`;

                                        let existingEndorsement = $(endorsementContainerElSel).data('existingendorsement');

                                        if (existingEndorsement && existingEndorsement.length > 0) {

                                            $(endorsementContainerElSel).html("");

                                            existingEndorsement.forEach(function (item, index) {
                                                let endorsementTemplate = $.validator.format($.trim($(endorsementTmplSel).html()));

                                                $(endorsementTemplate(index)).appendTo(endorsementContainerElSel);

                                                $(`${rootCntrlSel}_txtEndorsement-${index}`).val(item);

                                                $(endorsementContainerElSel).data('currindex', index);
                                            });
                                        }
                                    }

                                    function initAdditionalCodes(rootCntrlSel) {
                                        let addlContainerElSel = `${rootCntrlSel} #AdditionalCodeContainer`;
                                        //let addlCodeTmplSel = `${rootCntrlSel}_additionalCodeTmpl`;
                                        let addlCodeDisabledTmplSel = `${rootCntrlSel}_additionalCodeDisabledTmpl`;

                                        let existingAddnCode = $(addlContainerElSel).data('existingadditionalcode');

                                        if (existingAddnCode && existingAddnCode.length > 0) {

                                            $(addlContainerElSel).html("");

                                            existingAddnCode.forEach(function (item, index) {
                                                //var addlCodeTemplate = (item && item.Source && item.Source === 'M') ? $.validator.format($.trim($(addlCodeTmplSel).html())) : $.validator.format($.trim($(addlCodeDisabledTmplSel).html()));
                                                var addlCodeTemplate = $.validator.format($.trim($(addlCodeDisabledTmplSel).html()));
                                                $(addlCodeTemplate(index)).appendTo(addlContainerElSel);

                                                $(`${rootCntrlSel}_AdditionalCode-${index}`).val(item.AdditionalCode);
                                                $(`${rootCntrlSel}_AdditionalCodeSystem-${index}`).val(item.AdditionalCodeSystem);

                                                $(addlContainerElSel).data('currindex', index);
                                            });
                                        }
                                    }

                                    function onRecordStatusChange(reasonControlId, val) {
                                        if (!reasonControlId) return;
                                        if (val && val === "004")
                                            $(reasonControlId).show();
                                        else
                                            $(reasonControlId).hide();
                                    }
                                </script>
                                <script type="text/javascript" src="/js/studio.autocomplete.js"></script>
                                <script src="/lib/jquery-validation/dist/jquery.validate.js"></script>
                                <script src="/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
                                <script src="/lib/jquery-validation-unobtrusive/jquery.unobtrusive-ajax.js"></script>
                            </div>
                        </form>
                        <div id="btnsShowinspector" style="" class="float-right mt-2">
                            <button type="button" class="btn btn-secondary">Close</button>
                            <button type="button" class="btn btn-primary" id="btnUpdateCustomMed">Update</button>
                            <button id="btnUpdateCustomMedDisabled" class="btn btn-primary" type="button" disabled="" style="display: none;">
                                <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                                Updating...
                            </button>
                        </div>
                    </div>
                </div>
                <!--<div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>-->
            </div>
        </div>
    </div>

    <!-----------------------Inspector Component VTM Ends------------------------------->
    <!------------------------------Bulk Edit AMP Starts--------------------------------------------------------------->

    <div class="modal fade" id="bulkEditAMPModalEditor" tabindex="-1" role="dialog" aria-labelledby="bulkEditAMPModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="bulkEditAMPModalLongTitle">Bulk Edit Formulary</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="overflow-y:auto;">
                    <div id="divinspectorcompscroll">
                        <div id="spinnerInseptor" style="display:none;">
                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                        </div>

                        <form id="bulkUpdatecustomMedForm" novalidate="novalidate">
                            <div id="inspectorcomp" style="border: 1px solid rgba(0, 0, 0, 0.1);">
                                <style type="text/css">
                                    div.token-input-dropdown-facebook {
                                        /*z-index: 1051 !important;*/
                                        height: 200px !important;
                                        overflow-y: scroll !important;
                                        overflow-x: hidden !important;
                                    }

                                    .accordion-menu > button {
                                        display: block;
                                        position: relative;
                                    }

                                        .accordion-menu > button:after {
                                            content: "\f078"; /* fa-chevron-down */
                                            font-family: 'FontAwesome';
                                            position: absolute;
                                            right: 12px;
                                        }

                                        .accordion-menu > button[aria-expanded="true"]:after {
                                            content: "\f077"; /* fa-chevron-up */
                                        }

                                    .validation-summary-valid span {
                                        display: none;
                                    }
                                </style>
                                <link href="/lib/token-input-1.6.0/styles/token-input-facebook.css" rel="stylesheet" type="text/css">
                                <div class="text-danger validation-summary-valid" id="pnlMedicationValidationSmry" data-valmsg-summary="true">
                                    <span>Please correct the following errors</span>
                                    <ul>
                                        <li style="display:none"></li>
                                    </ul>
                                </div>
                                <script type="text/javascript">
                                    var rootCustomMedicationId = "Bulk_Update_AMP_Medication";
                                    var rootCustomMedicationIdSelector = "#Bulk_Update_AMP_Medication";
                                </script>
                                <div class="vtm-edit-medication root-vtm-edit-medication" id="Bulk_Update_AMP_Medication">
                                    <div id="accordion">
                                        <div class="card">
                                            <div class="card-header" id="headingOne">
                                                <h5 class="mb-0 accordion-menu">
                                                    <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Bulk_Update_AMP_Medication #productDetails" aria-expanded="true" aria-controls="productDetails">
                                                        <i class="fas fa-tablets"></i> Product Details
                                                    </button>
                                                </h5>
                                            </div>
                                            <div id="productDetails" class="collapse show" aria-labelledby="headingOne" data-parent="#Bulk_Update_AMP_Medication #accordion">
                                                <div class="card-body">
                                                    <div class="card mb-2">
                                                        <div class="card-header">
                                                            <div class="h6">
                                                                Classification Codes
                                                                <div class="float-right">
                                                                    <label class="mr-2"><a href="#" class="add-classification" id="Bulk_Update_AMP_Medication_btnAddClassificationCode"><i class="fa fa-plus"></i></a></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card-body">
                                                            <div id="ClassificationCodeContainer" data-existingadditionalcode="[]" data-isreadonly="false">
                                                                <!--Add Additional Code Controls -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="licenseduse" class="col-sm-5 col-form-label">Licensed Indications</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" id="Bulk_Update_AMP_Medication_licensedUse" name="unlicensedUse" type="text" data-query-url="https://synapsestudio-demo.azurewebsites.net/Formulary/SearchIndication" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="unlicenseduse" class="col-sm-5 col-form-label">Unlicensed Indications</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" id="Bulk_Update_AMP_Medication_unlicensedUse" name="unlicensedUse" type="text" data-query-url="https://synapsestudio-demo.azurewebsites.net/Formulary/SearchIndication" />


                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header" id="headingTwo">
                                                <h5 class="mb-0 accordion-menu">
                                                    <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Bulk_Update_AMP_Medication #posology" aria-expanded="false" aria-controls="posology">
                                                        <i class="fas fa-flask"></i> Posology
                                                    </button>
                                                </h5>
                                            </div>

                                            <div id="posology" class="collapse" aria-labelledby="headingTwo" data-parent="#Bulk_Update_AMP_Medication #accordion">
                                                <div class="card-body">
                                                    <div class="form-group row">
                                                        <label for="roundingfactor" class="col-sm-5 col-form-label">Rounding Factor</label>
                                                        <div class="col-sm-7">
                                                            <select class="form-control" id="RoundingFactor" name="RoundingFactor">
                                                                <option value="">Please Select</option>
                                                                <option value="001">0.5</option>
                                                                <option value="002">1</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="Route" class="col-sm-5 col-form-label">Route</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" id="Bulk_Update_AMP_Medication_Route" name="Route" type="text" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="unlicensedroute" class="col-sm-5 col-form-label">Unlicensed Route</label>
                                                        <div class="col-sm-7">

                                                            <input class="form-control studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" id="Bulk_Update_AMP_Medication_unlicensedRoute" name="Route" type="text" />

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header" id="headingThree">
                                                <h5 class="mb-0 accordion-menu">
                                                    <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Bulk_Update_AMP_Medication #guidance" aria-expanded="false" aria-controls="guidance">
                                                        <i class="fas fa-book-reader"></i> Guidance
                                                    </button>
                                                </h5>
                                            </div>

                                            <div id="guidance" class="collapse" aria-labelledby="headingThree" data-parent="#Bulk_Update_AMP_Medication #accordion">
                                                <div class="card-body">
                                                    <div class="card mb-2">
                                                        <div class="card-header">
                                                            <div class="h6">
                                                                Custom Warnings
                                                                <div class="float-right">
                                                                    <label class="mr-2"><a href="#" class="add-custom-warning" id="Bulk_Update_AMP_Medication_btnAddCustomWarning"><i class="fa fa-plus"></i></a></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card-body">
                                                            <div id="CustomWarningContainer" data-existingcustomwarning="[]">
                                                                <!--Add Custom Warning Controls -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card mb-2">
                                                        <div class="card-header">
                                                            <div class="h6">
                                                                Endorsements
                                                                <div class="float-right">
                                                                    <label class="mr-2"><a href="#" class="add-endorsement" id="Bulk_Update_AMP_Medication_btnAddEndorsement"><i class="fa fa-plus"></i></a></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card-body">
                                                            <div id="EndorsementContainer" data-existingendorsements="[]">
                                                                <!--Add Endorsement Controls -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="medusapreparationinstructions" class="col-sm-5 col-form-label">Medusa Preparation Instructions</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control" id="MedusaPreparationInstructions" name="MedusaPreparationInstructions" type="text" value="">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="niceta" class="col-sm-5 col-form-label">NICE TA</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control" id="NICETA" name="NICETA" type="text" value="">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="sideeffects" class="col-sm-5 col-form-label">Side Effects</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" id="Bulk_Update_AMP_Medication_sideEffects" name="Route" type="text" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header" id="headingFour">
                                                <h5 class="mb-0 accordion-menu">
                                                    <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Bulk_Update_AMP_Medication #flagsClassification" aria-expanded="false" aria-controls="flagsClassification">
                                                        <i class="fas fa-flag"></i> Flags / Classification
                                                    </button>
                                                </h5>
                                            </div>

                                            <div id="flagsClassification" class="collapse" aria-labelledby="headingFour" data-parent="#Bulk_Update_AMP_Medication #accordion">
                                                <div class="card-body">
                                                    <div class="form-group row">
                                                        <label for="cautions" class="col-sm-5 col-form-label">Cautions</label>
                                                        <div class="col-sm-7">
                                                            <input class="form-control studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" id="Bulk_Update_AMP_Medication_cautions" name="Route" type="text" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="clinicaltrialmedication" class="col-sm-5 col-form-label">Clinical Trial Medication</label>
                                                        <div class="col-sm-7">
                                                            <input type="checkbox" name="chlClinicalTrialMedication" id="chkClinicalTrialMedication">

                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="criticaldrug" class="col-sm-5 col-form-label">Critical Drug</label>
                                                        <div class="col-sm-7">
                                                            <input type="checkbox" name="chkcriticaldrug" id="chkcriticaldrug">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="orderable" class="col-sm-5 col-form-label">"Prescribable</label>
                                                        <div class="col-sm-7">
                                                            <input type="checkbox" name="chkPrescribable" id="chkPrescribable">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="outpatientmedication" class="col-sm-5 col-form-label">Outpatient Medication</label>
                                                        <div class="col-sm-7">
                                                            <input type="checkbox" name="chkoutpatientmedication" id="chkoutpatientmedication">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="titrationtype" class="col-sm-5 col-form-label">Titration Type</label>
                                                        <div class="col-sm-7">
                                                            <select class="form-control" id="TitrationType" name="TitrationType">
                                                                <option value="">Please Select</option>
                                                                <option value="001">Blood Sugar</option>
                                                                <option value="002">INR</option>
                                                                <option value="003">MAP</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header" id="headingFive">
                                                <h5 class="mb-0 accordion-menu">
                                                    <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Bulk_Update_AMP_Medication #history" aria-expanded="false" aria-controls="history">
                                                        <i class="fas fa-history"></i> History
                                                    </button>
                                                </h5>
                                            </div>

                                            <div id="history" class="collapse" aria-labelledby="headingFive" data-parent="#Bulk_Update_AMP_Medication #accordion">
                                                <div class="card-body">
                                                    <div class="form-group row">
                                                        <label for="status" class="col-sm-5 col-form-label">Status</label>
                                                        <div class="col-sm-7">
                                                            <select class="form-control" data-val="true" data-val-required="Please select Status in History" id="Bulk_Update_AMP_Medication_ddlRecordStatus" name="Status">
                                                                <option selected="selected" value="001">Draft</option>
                                                                <option value="002">Approve</option>
                                                            </select>
                                                            <input id="OriginalStatus" name="OriginalStatus" type="hidden" value="001">
                                                        </div>
                                                    </div>
                                                    <div id="Bulk_Update_AMP_Medication_pnlReason" data-initialstatus="001" class="form-group row" style="display: none;">
                                                        <label class="col-sm-5 col-form-label">Reason</label>
                                                        <div class="col-sm-7">
                                                            <textarea class="form-control" id="RecStatuschangeMsg" name="RecStatuschangeMsg"></textarea>
                                                            <span class="field-validation-valid" data-valmsg-for="RecStatuschangeMsg" data-valmsg-replace="true"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header" id="headingSix">
                                                <h5 class="mb-0 accordion-menu">
                                                    <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Bulk_Update_AMP_Medication #preferences" aria-expanded="false" aria-controls="preferences">
                                                        <i class="fas fa-cogs"></i> Preferences
                                                    </button>
                                                </h5>
                                            </div>
                                            <div id="preferences" class="collapse" aria-labelledby="headingSix" data-parent="#Bulk_Update_AMP_Medication #accordion">
                                                <div class="card-body">
                                                    <div class="form-group row">
                                                        <label for="formularystatus" class="col-sm-5 col-form-label">Formulary Status</label>
                                                        <div class="col-sm-7">
                                                            <select class="form-control" data-val="true" data-val-required="Please select Formulary Status in Preferences" id="FormularyStatus" name="FormularyStatus">
                                                                <option value="">Please Select</option>
                                                                <option selected="selected" value="001">Formulary</option>
                                                                <option value="002">Non-Formulary</option>
                                                            </select>
                                                            <span class="field-validation-valid" data-valmsg-for="FormularyStatus" data-valmsg-replace="true"></span>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="ignoreduplicatewarnings" class="col-sm-5 col-form-label">Ignore Duplicate Warnings</label>
                                                        <div class="col-sm-7">
                                                            <input type="checkbox" name="chkignoreduplicatewarnings" id="chkignoreduplicatewarnings">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="witnessingrequired" class="col-sm-5 col-form-label">Witnessing Required</label>
                                                        <div class="col-sm-7">
                                                            <input type="checkbox" name="chkwitnessingrequired" id="chkwitnessingrequired">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div id="Bulk_Update_AMP_Medication_identificationCodeTmpl" disabled="" style="display:none;">
                                    <!--Add Identification Code Controls -->
                                    <div class="identificationCode">
                                        <div class="form-group row">
                                            <div class="col-sm-5">
                                                <select class="form-control" id="Bulk_Update_AMP_Medication_IdentificationCodeSystem-{0}" name="IdentificationCodeSystem">
                                                    <option value="">Please Select</option>
                                                    <option value="DMD">DMD</option>
                                                    <option value="Custom">Custom</option>
                                                </select>
                                                <span class="field-validation-valid" data-valmsg-for="IdentificationCodeSystem" data-valmsg-replace="true" id="Bulk_Update_AMP_Medication_IdentificationCodeSystem-{0}"></span>
                                            </div>
                                            <div class="col-sm-5">
                                                <input type="text" name="IdentificationCode" class="form-control" id="Bulk_Update_AMP_Medication_IdentificationCode-{0}">
                                                <span class="field-validation-valid" data-valmsg-for="IdentificationCode" data-valmsg-replace="true" id="Bulk_Update_AMP_Medication_IdentificationCode-{0}"></span>
                                            </div>
                                            <div class="col-sm-1">
                                                <button id="Bulk_Update_AMP_Medication_btnRemoveIdentificationCode-{0}" class="btn btn-sm btn-danger remove-identification-code"><span>Ã</span></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <script type="text/javascript">
                                    $('.remove-identification-code').click(function () {
                                        $(this).parent().parent().parent().remove();
                                    });
                                </script>


                                <div id="Bulk_Update_AMP_Medication_additionalCodeDisabledTmpl" disabled="" style="display:none;">
                                    <!--Add Additional Code Controls -->
                                    <div class="additionalCode">
                                        <div class="form-group row">
                                            <div class="col-sm-5">
                                                <select class="form-control" disabled="disabled" id="Bulk_Update_AMP_Medication_AdditionalCodeSystem-{0}" name="AdditionalCodeSystem">
                                                    <option value="">Please Select</option>
                                                    <option value="BNF">BNF</option>
                                                    <option value="ATC">ATC</option>
                                                    <option value="FDB">FDB</option>
                                                    <option value="CustomGroup">Custom Group</option>
                                                </select>
                                            </div>
                                            <div class="col-sm-5">
                                                <input type="text" name="AdditionalCode" class="form-control" id="Bulk_Update_AMP_Medication_AdditionalCode-{0}" readonly="">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="Bulk_Update_AMP_Medication_additionalCodeTmpl" disabled="" style="display:none;">
                                    <!--Add Additional Code Controls -->
                                    <div class="additionalCode">
                                        <div class="form-group row">
                                            <div class="col-sm-5">
                                                <select class="form-control" id="Bulk_Update_AMP_Medication_AdditionalCodeSystem-{0}" name="AdditionalCodeSystem">
                                                    <option value="">Please Select</option>
                                                    <option value="BNF">BNF</option>
                                                    <option value="ATC">ATC</option>
                                                    <option value="FDB">FDB</option>
                                                    <option value="CustomGroup">Custom Group</option>
                                                </select>
                                            </div>
                                            <div class="col-sm-5">
                                                <input type="text" name="AdditionalCode" class="form-control" id="Bulk_Update_AMP_Medication_AdditionalCode-{0}">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="Bulk_Update_AMP_Medication_customWarningTmpl" disabled="" style="display:none;">
                                    <!--Add Ingredient Code Controls -->
                                    <div class="custom-warning">
                                        <div class="form-group row">
                                            <div class="col-sm-6">
                                                <textarea name="CustomWarning" class="form-control" id="Bulk_Update_AMP_Medication_txtCustomWarning-{0}" maxlength="255"></textarea>
                                                <span class="field-validation-valid" data-valmsg-for="CustomWarning" data-valmsg-replace="true" id="Bulk_Update_AMP_Medication_txtCustomWarning-{0}"></span>
                                            </div>
                                            <div class="col-sm-5">
                                                <label for="needresponse" class="col-sm-7 col-form-label">Need Response</label>
                                                <input type="checkbox" name="needresponse" class="col-sm-2 form-control" id="Bulk_Update_AMP_Medication_chkNeedResponse-{0}">
                                            </div>
                                            <div class="col-sm-1">
                                                <button id="Bulk_Update_AMP_Medication_btnRemoveCustomWarning-{0}" class="btn btn-sm btn-danger remove-custom-warning"><span>Ã</span></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <script type="text/javascript">
                                    $('.remove-custom-warning').click(function () {
                                        $(this).parent().parent().parent().remove();
                                    });
                                </script>


                                <div id="Bulk_Update_AMP_Medication_endorsementTmpl" disabled="" style="display:none;">
                                    <!--Add Endorsement Controls -->
                                    <div class="endorsement">
                                        <div class="form-group row">
                                            <div class="col-sm-10">
                                                <textarea name="Endorsement" class="form-control" id="Bulk_Update_AMP_Medication_txtEndorsement-{0}" maxlength="255"></textarea>
                                                <span class="field-validation-valid" data-valmsg-for="Endorsement" data-valmsg-replace="true" id="Bulk_Update_AMP_Medication_txtEndorsement-{0}"></span>
                                            </div>
                                            <div class="col-sm-1">
                                                <button id="Bulk_Update_AMP_Medication_btnEndorsement-{0}" class="btn btn-sm btn-danger remove-endorsement"><span>Ã</span></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <script type="text/javascript">
                                    $('.remove-endorsement').click(function () {
                                        $(this).parent().parent().parent().remove();
                                    });
                                </script>

                                <script type="text/javascript" src="/lib/token-input-1.6.0/src/jquery.tokeninput.js"></script>
                                <script type="text/javascript">

                                    $(document).ready(function () {

                                        setTimeout(() => {
                                            let inputs = $(".vtm-edit-medication :input");
                                            if (inputs && inputs.length > 0) {
                                                inputs.each(function (indx, el) {
                                                    let isReadOnly = $(this).data('isreadonly');
                                                    if (isReadOnly == true) $(this).attr('readonly', true);
                                                });
                                            }
                                        }, 100);

                                        initAdditionalCodes('#Bulk_Update_AMP_Medication');

                                        initIdentificationCodes('#Bulk_Update_AMP_Medication');

                                        initCustomWarnings('#Bulk_Update_AMP_Medication');

                                        initEndorsements('#Bulk_Update_AMP_Medication');

                                        let rootCntrl = '#Bulk_Update_AMP_Medication';

                                        let recStatusCntrolId = `${rootCntrl}_pnlReason`;
                                        onRecordStatusChange(recStatusCntrolId, $(recStatusCntrolId).data('initialstatus'));

                                        $(`${rootCntrl}_ddlRecordStatus`).on('change', function () {
                                            let rootCntrl = '#Bulk_Update_AMP_Medication';
                                            let recStatusCntrolId = `${rootCntrl}_pnlReason`;
                                            onRecordStatusChange(recStatusCntrolId, $(this).val());
                                        });

                                        $(`${rootCntrl} :checkbox`).bootstrapToggle('destroy');

                                        setTimeout(() => {
                                            $(`${rootCntrl} :checkbox`).bootstrapToggle({
                                                on: 'Yes',
                                                off: 'No',
                                                onstyle: 'success',
                                                offstyle: 'danger',
                                                width: 70,
                                                size: 'sm'
                                            });
                                        }, 100);

                                        var cautions = new studio.AutoComplete(`${rootCntrl}_cautions`, null, null, null, { allowFreeTagging: true });
                                        cautions.init();

                                        var sideEffects = new studio.AutoComplete(`${rootCntrl}_sideEffects`, null, null, null, { allowFreeTagging: true });
                                        sideEffects.init();

                                        var licensedUse = new studio.AutoComplete(`${rootCntrl}_licensedUse`, null, null, null, {});
                                        licensedUse.init();

                                        var unlicensedUse = new studio.AutoComplete(`${rootCntrl}_unlicensedUse`, null, null, null, {});
                                        unlicensedUse.init();

                                        let routeAutoComplete = new studio.AutoComplete(`${rootCntrl}_Route`);
                                        routeAutoComplete.init();

                                        let unlicensedRouteAutoComplete = new studio.AutoComplete(`${rootCntrl}_unlicensedRoute`);
                                        unlicensedRouteAutoComplete.init();

                                        $(`${rootCntrl}_btnAddClassificationCode`).click(function () {

                                            let rootEl = $(this).closest('.root-vtm-edit-medication');
                                            let roolElId = $(rootEl).attr('id');
                                            let containerElSel = `#${roolElId} #ClassificationCodeContainer`;

                                            let currIndex = $(containerElSel).data('currindex');
                                            if (currIndex === undefined || currIndex === null) currIndex = 0;
                                            else currIndex = currIndex + 1;

                                            var template = $.validator.format($.trim($(`#${roolElId}_additionalCodeTmpl`).html()));
                                            $(template(currIndex)).appendTo(containerElSel);
                                            $(containerElSel).data('currindex', currIndex);
                                        });

                                        $(`${rootCntrl}_btnAddEndorsement`).click(function () {

                                            let rootEl = $(this).closest('.root-vtm-edit-medication');
                                            let roolElId = $(rootEl).attr('id');
                                            let endorsementElSel = `#${roolElId} #EndorsementContainer`;

                                            let currIndex = $(endorsementElSel).data('currindex');
                                            if (currIndex === undefined || currIndex === null) currIndex = 0;
                                            else currIndex = currIndex + 1;

                                            var template = $.validator.format($.trim($(`#${roolElId}_endorsementTmpl`).html()));
                                            $(template(currIndex)).appendTo(endorsementElSel);
                                            $(endorsementElSel).data('currindex', currIndex);
                                        });

                                        $(`${rootCntrl}_btnAddCustomWarning`).click(function () {

                                            let rootEl = $(this).closest('.root-vtm-edit-medication');
                                            let roolElId = $(rootEl).attr('id');
                                            let customWarningContainerElSel = `#${roolElId} #CustomWarningContainer`;

                                            let currIndex = $(customWarningContainerElSel).data('currindex');
                                            if (currIndex === undefined || currIndex === null) currIndex = 0;
                                            else currIndex = currIndex + 1;

                                            var cwTemplate = $.validator.format($.trim($(`#${roolElId}_customWarningTmpl`).html()));
                                            $(cwTemplate(currIndex)).appendTo(customWarningContainerElSel);
                                            $(customWarningContainerElSel).data('currindex', currIndex);
                                        });

                                        $(`${rootCntrl}_btnAddIdentificationCode`).click(function () {

                                            let rootEl = $(this).closest('.root-vtm-edit-medication');
                                            let roolElId = $(rootEl).attr('id');
                                            let idenContainerElSel = `#${roolElId} #IdentificationCodeContainer`;

                                            let currIndex = $(idenContainerElSel).data('currindex');
                                            if (currIndex === undefined || currIndex === null) currIndex = 0;
                                            else currIndex = currIndex + 1;

                                            var indicationCodeTemplate = $.validator.format($.trim($(`#${roolElId}_identificationCodeTmpl`).html()));
                                            $(indicationCodeTemplate(currIndex)).appendTo(idenContainerElSel);
                                            $(idenContainerElSel).data('currindex', currIndex);
                                        });
                                    });

                                    function initIdentificationCodes(rootCntrlSel) {

                                        let idenContainerElSel = `${rootCntrlSel} #IdentificationCodeContainer`;

                                        let idenCodeTmplSel = `${rootCntrlSel}_identificationCodeTmpl`;

                                        let existingIdentCode = $(idenContainerElSel).data('existingidentificationcode');

                                        if (existingIdentCode && existingIdentCode.length > 0) {

                                            $(idenContainerElSel).html("");

                                            existingIdentCode.forEach(function (item, index) {
                                                //var addlCodeTemplate = (item && item.Source && item.Source === 'M') ? $.validator.format($.trim($(addlCodeTmplSel).html())) : $.validator.format($.trim($(addlCodeDisabledTmplSel).html()));
                                                var idenCodeTemplate = $.validator.format($.trim($(idenCodeTmplSel).html()));

                                                $(idenCodeTemplate(index)).appendTo(idenContainerElSel);

                                                $(`${rootCntrlSel}_IdentificationCode-${index}`).val(item.AdditionalCode);
                                                $(`${rootCntrlSel}_IdentificationCodeSystem-${index}`).val(item.AdditionalCodeSystem);

                                                $(idenContainerElSel).data('currindex', index);
                                            });
                                        }
                                    }

                                    function initCustomWarnings(rootCntrlSel) {

                                        let cwContainerElSel = `${rootCntrlSel} #CustomWarningContainer`;

                                        let cwTmplSel = `${rootCntrlSel}_customWarningTmpl`;

                                        let existingCW = $(cwContainerElSel).data('existingcustomwarning');

                                        if (existingCW && existingCW.length > 0) {

                                            $(cwContainerElSel).html("");

                                            existingCW.forEach(function (item, index) {
                                                let cwTemplate = $.validator.format($.trim($(cwTmplSel).html()));

                                                $(cwTemplate(index)).appendTo(cwContainerElSel);

                                                $(`${rootCntrlSel}_txtCustomWarning-${index}`).val(item.Warning);
                                                $(`${rootCntrlSel}_chkNeedResponse-${index}`).val(item.NeedResponse);

                                                $(cwContainerElSel).data('currindex', index);
                                            });
                                        }
                                    }

                                    function initEndorsements(rootCntrlSel) {

                                        let endorsementContainerElSel = `${rootCntrlSel} #EndorsementContainer`;

                                        let endorsementTmplSel = `${rootCntrlSel}_endorsementTmpl`;

                                        let existingEndorsement = $(endorsementContainerElSel).data('existingendorsement');

                                        if (existingEndorsement && existingEndorsement.length > 0) {

                                            $(endorsementContainerElSel).html("");

                                            existingEndorsement.forEach(function (item, index) {
                                                let endorsementTemplate = $.validator.format($.trim($(endorsementTmplSel).html()));

                                                $(endorsementTemplate(index)).appendTo(endorsementContainerElSel);

                                                $(`${rootCntrlSel}_txtEndorsement-${index}`).val(item);

                                                $(endorsementContainerElSel).data('currindex', index);
                                            });
                                        }
                                    }

                                    function initAdditionalCodes(rootCntrlSel) {
                                        let addlContainerElSel = `${rootCntrlSel} #AdditionalCodeContainer`;
                                        //let addlCodeTmplSel = `${rootCntrlSel}_additionalCodeTmpl`;
                                        let addlCodeDisabledTmplSel = `${rootCntrlSel}_additionalCodeDisabledTmpl`;

                                        let existingAddnCode = $(addlContainerElSel).data('existingadditionalcode');

                                        if (existingAddnCode && existingAddnCode.length > 0) {

                                            $(addlContainerElSel).html("");

                                            existingAddnCode.forEach(function (item, index) {
                                                //var addlCodeTemplate = (item && item.Source && item.Source === 'M') ? $.validator.format($.trim($(addlCodeTmplSel).html())) : $.validator.format($.trim($(addlCodeDisabledTmplSel).html()));
                                                var addlCodeTemplate = $.validator.format($.trim($(addlCodeDisabledTmplSel).html()));
                                                $(addlCodeTemplate(index)).appendTo(addlContainerElSel);

                                                $(`${rootCntrlSel}_AdditionalCode-${index}`).val(item.AdditionalCode);
                                                $(`${rootCntrlSel}_AdditionalCodeSystem-${index}`).val(item.AdditionalCodeSystem);

                                                $(addlContainerElSel).data('currindex', index);
                                            });
                                        }
                                    }

                                    function onRecordStatusChange(reasonControlId, val) {
                                        if (!reasonControlId) return;
                                        if (val && val === "004")
                                            $(reasonControlId).show();
                                        else
                                            $(reasonControlId).hide();
                                    }
                                </script>
                                <script type="text/javascript" src="/js/studio.autocomplete.js"></script>
                                <script src="/lib/jquery-validation/dist/jquery.validate.js"></script>
                                <script src="/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
                                <script src="/lib/jquery-validation-unobtrusive/jquery.unobtrusive-ajax.js"></script>
                            </div>
                        </form>
                        <div id="btnsShowinspector" style="" class="float-right mt-2">
                            <button type="button" class="btn btn-secondary">Close</button>
                            <button type="button" class="btn btn-primary" id="btnUpdateCustomMed">Update</button>
                            <button id="btnUpdateCustomMedDisabled" class="btn btn-primary" type="button" disabled="" style="display: none;">
                                <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                                Updating...
                            </button>
                        </div>
                    </div>
                </div>
                <!--<div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>-->
            </div>
        </div>
    </div>

    <!------------------------------Bulk Edit AMP Ends------------------------------------------------------------------>
    <!-----------------------Bulk Edit Confirmation Pop-up Starts------------------------------------>
    <!-- Modal -->
    <div class="modal fade" id="bulkEditModal" tabindex="-1" role="dialog" aria-labelledby="bulkEditModalLabel" aria-hidden="true" data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Formularies to Edit</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row align-items-center p-1">
                        <div class="d-flex flex-row" style="width:100%;">
                            <div style=" margin: 0.2rem; padding: 0.2rem; font-size: 1rem;">
                                <input type="checkbox" checked="checked">
                                <label class="form-check-label">
                                    Select \ Un-Select All
                                </label>
                            </div>
                            <div class="ml-auto p-2" style="font-size:1rem;">
                                <i class="fa fa-trash text-danger" title="Clear All"></i>
                            </div>
                        </div>
                        <div class="col-12 p-2" style="height: 350px; overflow-y: auto; border: 1px solid black;">
                            <div style=" margin: 0.2rem; padding: 0.2rem; font-size: 1rem;">
                                <span class="fas fa-times" style="cursor:pointer;font-size:0.8rem;margin-right:10px;" title="Remove"></span>
                                <span>
                                    <input type="checkbox" checked="checked">
                                    <label class="form-check-label">
                                        Nuromol 200mg/500mg tablets (Reckitt Benckiser Healthcare (UK) Ltd)
                                    </label>
                                </span>
                            </div>
                            <div style="margin: 0.2rem; padding: 0.2rem; font-size: 1rem;">
                                <span class="fa fa-times" style="cursor:pointer;font-size:0.8rem;margin-right:10px;" title="Remove"></span>
                                <span>
                                    <input type="checkbox" checked="checked">
                                    <label class="form-check-label">
                                        Nuromol 200mg/500mg tablets (Reckitt Benckiser Healthcare (UK) Ltd)
                                    </label>
                                </span>
                            </div>
                            <div style=" margin: 0.2rem; padding: 0.2rem; font-size: 1rem;">
                                <span class="fa fa-times" style="cursor:pointer;font-size:0.8rem;margin-right:10px;" title="Remove"></span>
                                <span>
                                    <input type="checkbox" checked="checked">
                                    <label class="form-check-label">
                                        Paraldehyde 100% solution for injection 5ml ampoules (A A H Pharmaceuticals Ltd)
                                    </label>
                                </span>
                            </div>
                            <div style=" margin: 0.2rem; padding: 0.2rem; font-size: 1rem;">
                                <span class="fa fa-times" style="cursor:pointer;font-size:0.8rem;margin-right:10px;" title="Remove"></span>
                                <span>
                                    <input type="checkbox" checked="checked">
                                    <label class="form-check-label">
                                        Preotact 1.61mg powder and solvent for solution for injection cartridges (Nycomed UK Ltd)
                                    </label>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="btnApproveBulkEdit">Edit</button>
                </div>
            </div>
        </div>
    </div>
    <!-----------------------Bulk Edit Confirmation pop-up Ends-------------------------------------->
    <!------------------------------------------Import From DMD STARTS-------------------------------------->

    <div class="modal fade" id="medModal" tabindex="-1" role="dialog" aria-labelledby="medModalLabel" aria-hidden="true" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content" style="min-height:600px;">
                <div class="modal-header">
                    <h5 class="modal-title" id="addMedication">Add Medication</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Ã</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-4">
                            <input id="searchMed" class="form-control" placeholder="Search Medication (Min 3 characters)">
                        </div>
                        <div class="col-2">
                            <input type="button" id="searchMedication" class="btn btn-primary" value="Search">
                        </div>
                    </div>
                    <div style="margin: 15px 0 20px 10px">
                        <div class="row d-flex justify-content-start" style="margin:0 !important;margin-bottom:-30px !important;">
                            <input type="checkbox" id="chkImportAutoSelect" name="chkImportAutoSelect">
                            <label style="margin-left:5px;margin-top:-2px;" for="chkImportAutoSelect">Auto-Select child Records</label>
                        </div>
                        <div class="row d-flex justify-content-end user-instruction" style="margin:0 !important;margin-right:1rem !important;margin-bottom:-30px !important;">Select record(s) to remove from bucket*</div>
                    </div>
                    <div class="row align-items-center p-3">
                        <div class="col-5" style="height: 350px; overflow-y: auto; border: 1px solid black">
                            <div id="modal-spinner" class="spinner-grow spinner-grow-sm" role="status" style="display:none;">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <div id="tree2" style="display:none;">
                                <ul id="ft-id-2" class="ui-fancytree fancytree-container fancytree-plain fancytree-ext-glyph" tabindex="0" role="tree" aria-multiselectable="true"><li role="treeitem" aria-selected="false" class="fancytree-lastsib"><span class="fancytree-node fancytree-lastsib fancytree-statusnode-nodata fancytree-exp-nl fancytree-ico-c"><span class="fancytree-expander  "></span><span role="presentation" class="fancytree-icon  far fa-meh"></span><span class="fancytree-title">No data.</span></span></li></ul>
                            </div>
                        </div>
                        <div class="col-2 text-center">
                            <button type="button" class="btn btn-secondary btn-lg" id="btnAddMed">&gt;&gt;</button>
                            <br>
                            <br>
                            <br>
                            <button type="button" class="btn btn-secondary btn-lg" id="btnRemoveMed">&lt;&lt;</button>
                        </div>
                        <div class="col-5" style="height: 350px; overflow-y: auto; border: 1px solid black">
                            <div id="dvSelectedNodes" class="form-check">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="btnImport" disabled="disabled">Import</button>
                    <button id="btnImportDisabled" class="btn btn-primary" type="button" disabled="" style="display: none;">
                        <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                        Importing...
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!------------------------------------------Import From DMD Ends-------------------------------------->
    <!------------------------------------------Add Custom Formulary Starts-------------------------------------->

    <div id="customMedModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="customMedModalLabel" aria-hidden="true" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="col-12" style="display:flex;flex-direction:column; margin-bottom:-10px;">
                        <div style="display:flex;flex-direction:row;">
                            <h5 class="modal-title" id="customMedication">Custom Medication</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">Ã</span>
                            </button>
                        </div>
                        <div style="display:flex;flex-direction:row;" class="mt-3 justify-content-end">
                            <div class="col-3" style="margin-top:5px;">
                                <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" name="licensedUse" id="Add_Custom_Medication_licensedUse" data-query-url="https://synapsestudio-demo.azurewebsites.net/Formulary/SearchIndication">
                            </div>
                            <div>
                                <button class="btn btn-primary text-left" type="button">
                                    <i class="fas fa-copy"></i> Clone AMP
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-body">
                    <div id="dvLoading" style="display:none;">
                        Loading
                        <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                        <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                        <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                    </div>
                    <form id="addCustomMedForm" novalidate="novalidate">
                        <div id="addCustomMedComponent" style="border: 1px solid rgba(0, 0, 0, 0.1);">
                            <style type="text/css">
                                div.token-input-dropdown-facebook {
                                    /*z-index: 1051 !important;*/
                                    height: 200px !important;
                                    overflow-y: scroll !important;
                                    overflow-x: hidden !important;
                                }

                                .accordion-menu > button {
                                    display: block;
                                    position: relative;
                                }

                                    .accordion-menu > button:after {
                                        content: "\f078"; /* fa-chevron-down */
                                        font-family: 'FontAwesome';
                                        position: absolute;
                                        right: 12px;
                                    }

                                    .accordion-menu > button[aria-expanded="true"]:after {
                                        content: "\f077"; /* fa-chevron-up */
                                    }

                                .validation-summary-valid span {
                                    display: none;
                                }
                            </style>
                            <link href="/lib/token-input-1.6.0/styles/token-input-facebook.css" rel="stylesheet" type="text/css">
                            <div class="text-danger validation-summary-valid" id="pnlMedicationValidationSmry" data-valmsg-summary="true">
                                <span>Please correct the following errors</span>
                                <ul>
                                    <li style="display:none"></li>
                                </ul>
                            </div>
                            <script type="text/javascript">
                                var rootCustomMedicationId = "Add_Custom_Medication";
                                var rootCustomMedicationIdSelector = "#Add_Custom_Medication";
                            </script>

                            <div class="vtm-edit-medication root-vtm-edit-medication" id="Add_Custom_Medication">
                                <div id="accordion">
                                    <div class="card">
                                        <div class="card-header" id="headingOne">
                                            <h5 class="mb-0 accordion-menu">
                                                <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Add_Custom_Medication #productDetails" aria-expanded="true" aria-controls="productDetails">
                                                    <i class="fas fa-tablets"></i> Product Details
                                                </button>
                                            </h5>
                                        </div>

                                        <div id="productDetails" class="collapse show" aria-labelledby="headingOne" data-parent="#Add_Custom_Medication #accordion">
                                            <div class="card-body">
                                                <div class="form-group row">
                                                    <label for="name" class="col-sm-5 col-form-label">Name</label>
                                                    <div class="col-sm-7">
                                                        <input class="form-control" data-isreadonly="true" data-val="true" value="Albumin Solution human 200mg/100ml solution for infusion (Octapharma Ltd)" readonly="readonly">
                                                        <span class="field-validation-valid" data-valmsg-for="Name" data-valmsg-replace="true"></span>
                                                        <input data-val="true" data-val-required="The IsImported field is required." id="IsImported" name="IsImported" type="hidden" value="True">
                                                        <input id="RecSource" name="RecSource" type="hidden" value="I">
                                                        <input id="ControlIdentifier" name="ControlIdentifier" type="hidden" value="Add_Custom_Medication">
                                                        <input id="IsDuplicate" name="IsDuplicate" type="hidden" value="False">
                                                        <input id="DuplicateOfFormularyId" name="DuplicateOfFormularyId" type="hidden" value="">
                                                        <input id="ParentCode" name="ParentCode" type="hidden" value="">
                                                        <input id="ParentName" name="ParentName" type="hidden" value="">
                                                        <input id="ParentProductType" name="ParentProductType" type="hidden" value="">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="name" class="col-sm-5 col-form-label">Virtual Therapeutic Moiety</label>
                                                    <div class="col-sm-7">
                                                        <input class="form-control" data-isreadonly="true" type="text" value="Albumin human" readonly="readonly">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="name" class="col-sm-5 col-form-label">Virtual Medicinal Product</label>
                                                    <div class="col-sm-7">
                                                        <input class="form-control" data-isreadonly="true" type="text" value="Albumin Solution human 200mg/100ml solution for infusion" readonly="readonly">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="code" class="col-sm-5 col-form-label">Primary Code</label>
                                                    <div class="col-sm-7">
                                                        <input class="form-control" data-isreadonly="false" data-val="true" data-val-required="Please enter Code in Product Details" id="Code" name="Code" type="text" value="121f-3434-dffe-3434-ddde" readonly>
                                                        <span class="field-validation-valid" data-valmsg-for="Code" data-valmsg-replace="true"></span>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="codesystem" class="col-sm-5 col-form-label">Primary Code System</label>
                                                    <div class="col-sm-7">
                                                        <input data-val="true" data-val-required="Please enter Code System in Product Details" id="hdnCodeSystem" name="CodeSystem" type="hidden" value="DMD"><input class="form-control" data-isreadonly="true" id="txtCodeSystem" name="CodeSystem" type="text" value="Custom" readonly="readonly">
                                                    </div>
                                                </div>
                                                <!--<div class="form-group row">
                                                    <label for="producttype" class="col-sm-5 col-form-label">Primary Code System</label>
                                                    <div class="col-sm-7">
                                                        <select class="form-control" data-val="true" data-val-required="Please select Primary Code System in Product Details" disabled="disabled" id="ProductType" name="ProductType">
                                                            <option value="">Please Select</option>
                                                            <option selected="selected" value="VTM">Custom</option>
                                                            <option value="VMP">VMP</option>
                                                            <option value="AMP">AMP</option>
                                                        </select><input id="Add_Custom_Medication_hdnProductType" name="ProductType" type="hidden" value="VTM">
                                                    </div>
                                                </div>-->
                                                <!--<div class="card mb-2">
                                                    <div class="card-header">
                                                        <div class="h6">
                                                            Other Identification Codes
                                                            <div class="float-right">
                                                                <label class="mr-2"><a href="#" class="add-identification-code" id="Add_Custom_Medication_btnAddIdentificationCode"><i class="fa fa-plus"></i></a></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <div id="IdentificationCodeContainer" data-existingidentificationcode="[]" data-isreadonly="True">
                                                        </div>
                                                    </div>
                                                </div>-->
                                                <div class="card mb-2">
                                                    <div class="card-header">
                                                        <div class="h6">
                                                            Classification Codes
                                                            <div class="float-right">
                                                                <label class="mr-2"><a href="#" class="add-identification-code" id="Add_Custom_Medication_btnAddClassificationCode"><i class="fa fa-plus"></i></a></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <div id="ClassificationCodeContainer" data-existingadditionalcode="[]" data-isreadonly="True">
                                                            <!--Add Additional Code Controls -->
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="codesystem" class="col-sm-5 col-form-label">Basis of preferred name</label>
                                                    <div class="col-sm-7">
                                                        <input class="form-control" data-isreadonly="false" id="txtCodeSystem" name="CodeSystem" type="text" value="">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="licenseduse" class="col-sm-5 col-form-label">Licensed Indications</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" name="licensedUse" id="Add_Custom_Medication_licensedUse" data-query-url="https://synapsestudio-demo.azurewebsites.net/Formulary/SearchIndication">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="unlicenseduse" class="col-sm-5 col-form-label">Unlicensed Indications</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" name="unlicensedUse" id="Add_Custom_Medication_unlicensedUse" data-query-url="https://synapsestudio-demo.azurewebsites.net/Formulary/SearchIndication">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="producttype" class="col-sm-5 col-form-label">Current licensing authority</label>
                                                    <div class="col-sm-7">
                                                        <select class="form-control">
                                                            <option value="">Please Select</option>
                                                            <option selected="selected" value="0">None</option>
                                                            <option value="1">
                                                                Medicines - MHRA / EMA
                                                            </option>
                                                            <option value="2">Devices</option>
                                                            <option value="3">Unknown</option>
                                                            <option value="4">Traditional Herbal Medicines</option>
                                                        </select><input id="Add_Custom_Medication_hdnProductType" name="ProductType" type="hidden" value="VTM">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="supplier" class="col-sm-5 col-form-label">Supplier</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="true" name="unlicensedUse" id="Add_Custom_Medication_supplier">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="tradefamily" class="col-sm-5 col-form-label">Trade Family</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="true" name="unlicensedUse" id="Add_Custom_Medication_tradefamily">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-header" id="headingTwo">
                                            <h5 class="mb-0 accordion-menu">
                                                <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Add_Custom_Medication #posology" aria-expanded="false" aria-controls="posology">
                                                    <i class="fas fa-flask"></i> Posology
                                                </button>
                                            </h5>
                                        </div>

                                        <div id="posology" class="collapse" aria-labelledby="headingTwo" data-parent="#Add_Custom_Medication #accordion">
                                            <div class="card-body">
                                                <div class="form-group row">
                                                    <label for="producttype" class="col-sm-5 col-form-label">Dose form</label>
                                                    <div class="col-sm-7">
                                                        <select class="form-control">
                                                            <option value="">Please Select</option>
                                                            <option selected="selected" value="VTM">Discrete</option>
                                                            <option value="VMP">Continuous</option>
                                                            <option value="AMP">Not applicable</option>
                                                        </select>

                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="roundingfactor" class="col-sm-5 col-form-label">Rounding Factor</label>
                                                    <div class="col-sm-7">
                                                        <select class="form-control" id="RoundingFactor" name="RoundingFactor">
                                                            <option value="">Please Select</option>
                                                            <option value="001">0.5</option>
                                                            <option value="002">1</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="Route" class="col-sm-5 col-form-label">Route</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" name="Route" id="Add_Custom_Medication_Route">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="unlicensedroute" class="col-sm-5 col-form-label">Unlicensed Route</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" name="unlicensedRoute" id="Add_Custom_Medication_unlicensedRoute">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="form" class="col-sm-5 col-form-label">Formulation</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="true" name="unlicensedRoute" id="Add_Custom_Medication_form">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="form" class="col-sm-5 col-form-label">Unit dose form size</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm" id="Add_Custom_Medication_form">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="form" class="col-sm-5 col-form-label">Unit dose form units</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="true" name="unlicensedRoute" id="Add_Custom_Medication_unitdoseformunit">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="form" class="col-sm-5 col-form-label">Unit dose unit of measure</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="true" name="unlicensedRoute" id="Add_Custom_Medication_unitdossseuom">
                                                    </div>
                                                </div>
                                                <div class="card mb-2">
                                                    <div class="card-header">
                                                        <div class="h6">
                                                            Ingredients
                                                            <div class="float-right">
                                                                <label class="mr-2"><a href="#" class="add-ingredient" id="Add_Custom_Medication_btnAddIngredient"><i class="fa fa-plus"></i></a></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <div id="IngredientContainer" data-existingingredient="[]" data-isreadonly="false">
                                                            <!--Add Ingredient Controls -->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-header" id="headingThree">
                                            <h5 class="mb-0 accordion-menu">
                                                <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Add_Custom_Medication #guidance" aria-expanded="false" aria-controls="guidance">
                                                    <i class="fas fa-book-reader"></i> Guidance
                                                </button>
                                            </h5>
                                        </div>

                                        <div id="guidance" class="collapse" aria-labelledby="headingThree" data-parent="#Add_Custom_Medication #accordion">
                                            <div class="card-body">
                                                <div class="form-group row">
                                                    <label for="contraindications" class="col-sm-5 col-form-label">Contraindications</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" name="contraindications" id="Add_Custom_Medication_contraindications">
                                                    </div>
                                                </div>
                                                <div class="card mb-2">
                                                    <div class="card-header">
                                                        <div class="h6">
                                                            Custom Warnings
                                                            <div class="float-right">
                                                                <label class="mr-2"><a href="#" class="add-custom-warning" id="Add_Custom_Medication_btnAddCustomWarning"><i class="fa fa-plus"></i></a></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <div id="CustomWarningContainer" data-existingcustomwarning="[]">
                                                            <!--Add Custom Warning Controls -->
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card mb-2">
                                                    <div class="card-header">
                                                        <div class="h6">
                                                            Endorsements
                                                            <div class="float-right">
                                                                <label class="mr-2"><a href="#" class="add-endorsement" id="Add_Custom_Medication_btnAddEndorsement"><i class="fa fa-plus"></i></a></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <div id="EndorsementContainer" data-existingendorsements="[]">
                                                            <!--Add Endorsement Controls -->
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="safetyMessages" class="col-sm-5 col-form-label">Important Safety Information</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" name="safetyMessages" id="Add_Custom_Medication_safetyMessages">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="medusapreparationinstructions" class="col-sm-5 col-form-label">Medusa Preparation Instructions</label>
                                                    <div class="col-sm-7">
                                                        <input class="form-control" id="MedusaPreparationInstructions" name="MedusaPreparationInstructions" type="text" value="">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="niceta" class="col-sm-5 col-form-label">NICE TA</label>
                                                    <div class="col-sm-7">
                                                        <input class="form-control" id="NICETA" name="NICETA" type="text" value="">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="sideeffects" class="col-sm-5 col-form-label">Side Effects</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" name="sideEffects" id="Add_Custom_Medication_sideEffects">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-header" id="headingFour">
                                            <h5 class="mb-0 accordion-menu">
                                                <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Add_Custom_Medication #flagsClassification" aria-expanded="false" aria-controls="flagsClassification">
                                                    <i class="fas fa-flag"></i> Flags / Classification
                                                </button>
                                            </h5>
                                        </div>

                                        <div id="flagsClassification" class="collapse" aria-labelledby="headingFour" data-parent="#Add_Custom_Medication #accordion">
                                            <div class="card-body">

                                                <div class="form-group row">
                                                    <label for="blacktriangle" class="col-sm-5 col-form-label">Black Triangle</label>
                                                    <div class="col-sm-7">
                                                        <div class="toggle btn btn-danger off btn-sm" data-toggle="toggle" role="button" style="width: 70px; height: 0px;"><input data-val="true" data-val-required="The BlackTriangle field is required." id="BlackTriangle" name="BlackTriangle" type="checkbox" value="true"><div class="toggle-group"><label for="BlackTriangle" class="btn btn-success btn-sm toggle-on">Yes</label><label for="BlackTriangle" class="btn btn-danger btn-sm toggle-off">No</label><span class="toggle-handle btn btn-light btn-sm"></span></div></div><input name="BlackTriangle" type="hidden" value="false">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="cautions" class="col-sm-5 col-form-label">Cautions</label>
                                                    <div class="col-sm-7">
                                                        <input type="text" class="form-control form-control-sm studio-autocomplete" data-existingdata="[]" data-isdisabled="false" data-singleselect="false" name="cautions" id="Add_Custom_Medication_cautions">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-sm-5 col-form-label">CFC Free</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="clinicaltrialmedication" class="col-sm-5 col-form-label">Clinical Trial Medication</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-sm-5 col-form-label">Controlled Drug Category</label>
                                                    <div class="col-sm-7">
                                                        <select class="form-control" id="ControlledDrugCategory" name="ControlledDrugCategory">
                                                            <option value="">Please Select</option>
                                                            <option value="0">No Controlled Drug Status</option>
                                                            <option value="1">Schedule 1 (CD Lic)</option>
                                                            <option value="2">Schedule 2 (CD)</option>
                                                            <option value="3">Schedule 2 (CD Exempt Safe Custody)</option>
                                                            <option value="4">Schedule 3 (CD No Register)</option>
                                                            <option value="5">Schedule 3 (CD No Register Exempt Safe Custody)</option>
                                                            <option value="6">Schedule 3 (CD No Register Phenobarbital)</option>
                                                            <option value="7">Schedule 3 (CD No Register Temazepam)</option>
                                                            <option value="8">Schedule 4 (CD Anab)</option>
                                                            <option value="9">Schedule 4 (CD Benz)</option>
                                                            <option value="10">Schedule 5 (CD Inv)</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="criticaldrug" class="col-sm-5 col-form-label">Critical Drug</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="emaadditionalmonitoring" class="col-sm-5 col-form-label">EMA Additional Monitoring</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="emaadditionalmonitoring" class="col-sm-5 col-form-label">Expensive Medication</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="emaadditionalmonitoring" class="col-sm-5 col-form-label">Gluten Free</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="highalertmedication" class="col-sm-5 col-form-label">High Alert Medication</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="ivtooral" class="col-sm-5 col-form-label">IV to Oral</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="emaadditionalmonitoring" class="col-sm-5 col-form-label">Not for PRN</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="orderable" class="col-sm-5 col-form-label">Prescribable</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="outpatientmedication" class="col-sm-5 col-form-label">Outpatient Medication</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-sm-5 col-form-label">Prescribing status</label>
                                                    <div class="col-sm-7">
                                                        <select class="form-control" id="PrescribingStatus" name="PrescribingStatus">
                                                            <option value="">Please Select</option>
                                                            <option value="1">Valid as a prescribable product</option>
                                                            <option value="2">Invalid to prescribe in NHS primary care</option>
                                                            <option value="3">Not prescribable as a VMP but AMP prescribable</option>
                                                            <option value="4">Never Valid To Prescribe As A VMP</option>
                                                            <option value="5">Not Recommended To Prescribe As A VMP</option>
                                                            <option value="9">Caution - AMP level prescribing advised</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="orderable" class="col-sm-5 col-form-label">Preservative free</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="orderable" class="col-sm-5 col-form-label">Restrictions on availability</label>
                                                    <div class="col-sm-7">
                                                        <select class="form-control" id="RestrictionsOnAvailability" name="RestrictionsOnAvailability">
                                                            <option value="">Please Select</option>
                                                            <option value="1">None</option>
                                                            <option value="2">Restricted Availability</option>
                                                            <option value="3">Individual Patient Supply</option>
                                                            <option value="4">Imported</option>
                                                            <option value="5">Clinical Trial</option>
                                                            <option value="6">Special</option>
                                                            <option value="7">Extemp</option>
                                                            <option value="8">Hospital Only</option>
                                                            <option value="9">Not available</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="orderable" class="col-sm-5 col-form-label">Sugar free</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="titrationtype" class="col-sm-5 col-form-label">Titration Type</label>
                                                    <div class="col-sm-7">
                                                        <select class="form-control" id="TitrationType" name="TitrationType">
                                                            <option value="">Please Select</option>
                                                            <option value="001">Blood Sugar</option>
                                                            <option value="002">INR</option>
                                                            <option value="003">MAP</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="unlicensedmedication" class="col-sm-5 col-form-label">Unlicensed Medication</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="unlicensedmedication" class="col-sm-5 col-form-label">Parallel import</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-header" id="headingSix">
                                            <h5 class="mb-0 accordion-menu">
                                                <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#Add_Custom_Medication #preferences" aria-expanded="false" aria-controls="preferences">
                                                    <i class="fas fa-cogs"></i> Preferences
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="preferences" class="collapse" aria-labelledby="headingSix" data-parent="#Add_Custom_Medication #accordion">
                                            <div class="card-body">
                                                <div class="form-group row">
                                                    <label for="formularystatus" class="col-sm-5 col-form-label">Formulary Status</label>
                                                    <div class="col-sm-7">
                                                        <select class="form-control" data-val="true" data-val-required="Please select Formulary Status in Preferences" id="FormularyStatus" name="FormularyStatus">
                                                            <option value="">Please Select</option>
                                                            <option selected="selected" value="001">Formulary</option>
                                                            <option value="002">Non-Formulary</option>
                                                        </select>
                                                        <span class="field-validation-valid" data-valmsg-for="FormularyStatus" data-valmsg-replace="true"></span>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="ignoreduplicatewarnings" class="col-sm-5 col-form-label">Ignore Duplicate Warnings</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="witnessingrequired" class="col-sm-5 col-form-label">Witnessing Required</label>
                                                    <div class="col-sm-7">
                                                        <input type="checkbox">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div id="Add_Custom_Medication_identificationCodeTmpl" disabled="" style="display:none;">
                                <!--Add Identification Code Controls -->
                                <div class="identificationCode">
                                    <div class="form-group row">
                                        <div class="col-sm-5">
                                            <select class="form-control" id="Add_Custom_Medication_IdentificationCodeSystem-{0}" name="IdentificationCodeSystem">
                                                <option value="">Please Select</option>
                                                <option value="DMD">DMD</option>
                                                <option value="Custom">Custom</option>
                                            </select>
                                            <span class="field-validation-valid" data-valmsg-for="IdentificationCodeSystem" data-valmsg-replace="true" id="Add_Custom_Medication_IdentificationCodeSystem-{0}"></span>
                                        </div>
                                        <div class="col-sm-5">
                                            <input type="text" name="IdentificationCode" class="form-control" id="Add_Custom_Medication_IdentificationCode-{0}">
                                            <span class="field-validation-valid" data-valmsg-for="IdentificationCode" data-valmsg-replace="true" id="Add_Custom_Medication_IdentificationCode-{0}"></span>
                                        </div>
                                        <div class="col-sm-1">
                                            <button id="Add_Custom_Medication_btnRemoveIdentificationCode-{0}" class="btn btn-sm btn-danger remove-identification-code"><span>Ã</span></button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <script type="text/javascript">
                                $('.remove-identification-code').click(function () {
                                    $(this).parent().parent().parent().remove();
                                });
                            </script>


                            <div id="Add_Custom_Medication_additionalCodeTmpl" disabled="" style="display:none;">
                                <!--Add Additional Code Controls -->
                                <div class="additionalCode">
                                    <div class="form-group row">
                                        <div class="col-sm-5">
                                            <select class="form-control" id="Add_Custom_Medication_AdditionalCodeSystem-{0}" name="AdditionalCodeSystem">
                                                <option value="">Please Select</option>
                                                <option value="BNF">BNF</option>
                                                <option value="ATC">ATC</option>
                                                <option value="FDB">FDB</option>
                                                <option value="CustomGroup">Custom Group</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-5">
                                            <input type="text" name="AdditionalCode" class="form-control" id="Add_Custom_Medication_AdditionalCode-{0}">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="Add_Custom_Medication_customWarningTmpl" disabled="" style="display:none;">
                                <!--Add Ingredient Code Controls -->
                                <div class="custom-warning">
                                    <div class="form-group row">
                                        <div class="col-sm-6">
                                            <textarea name="CustomWarning" class="form-control" id="Add_Custom_Medication_txtCustomWarning-{0}" maxlength="255"></textarea>
                                            <span class="field-validation-valid" data-valmsg-for="CustomWarning" data-valmsg-replace="true" id="Add_Custom_Medication_txtCustomWarning-{0}"></span>
                                        </div>
                                        <div class="col-sm-5">
                                            <label for="needresponse" class="col-sm-7 col-form-label">Need Response</label>
                                            <input type="checkbox" name="needresponse" class="col-sm-2 form-control" id="Add_Custom_Medication_chkNeedResponse-{0}">
                                        </div>
                                        <div class="col-sm-1">
                                            <button id="Add_Custom_Medication_btnRemoveCustomWarning-{0}" class="btn btn-sm btn-danger remove-custom-warning"><span>Ã</span></button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <script type="text/javascript">
                                $('.remove-custom-warning').click(function () {
                                    $(this).parent().parent().parent().remove();
                                });
                            </script>


                            <div id="Add_Custom_Medication_endorsementTmpl" disabled="" style="display:none;">
                                <!--Add Endorsement Controls -->
                                <div class="endorsement">
                                    <div class="form-group row">
                                        <div class="col-sm-10">
                                            <textarea name="Endorsement" class="form-control" id="Add_Custom_Medication_txtEndorsement-{0}" maxlength="255"></textarea>
                                            <span class="field-validation-valid" data-valmsg-for="Endorsement" data-valmsg-replace="true" id="Add_Custom_Medication_txtEndorsement-{0}"></span>
                                        </div>
                                        <div class="col-sm-1">
                                            <button id="Add_Custom_Medication_btnEndorsement-{0}" class="btn btn-sm btn-danger remove-endorsement"><span>Ã</span></button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="Add_Custom_Medication_ingredientTmpl" disabled="" style="display:none;">
                                <!--Add Ingredient Controls -->
                                <div class="ingredient">
                                    <div class="form-group row">
                                        <label for="Ingredient" class="col-sm-3 col-form-label">Ingredient</label>
                                        <div class="col-sm-8">
                                            <input type="text" name="Ingredient" class="form-control studio-autocomplete" data-singleselect="true" id="Create_New_Custom_Medication_Ingredient-{0}" data-query-url="https://synapsestudio-demo.azurewebsites.net/Formulary/SearchIngredients">
                                            <span class="field-validation-valid" data-valmsg-for="Ingredient" data-valmsg-replace="true" id="Create_New_Custom_Medication_Ingredient-{0}"></span>
                                        </div>
                                        <div class="col-sm-1">
                                            <button class="btn btn-sm btn-danger" onclick="RemoveIngredient(this)">
                                                <span>Ã</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="StrengthValNumerator" class="col-sm-3 col-form-label">Strength Value Numerator</label>
                                        <div class="col-sm-4">
                                            <input type="text" name="StrengthValNumerator" class="form-control" id="Create_New_Custom_Medication_StrengthValNumerator-{0}">
                                            <span class="field-validation-valid" data-valmsg-for="StrengthValNumerator" data-valmsg-replace="true" id="Create_New_Custom_Medication_StrengthValNumerator-{0}"></span>
                                        </div>
                                        <div class="col-sm-4">
                                            <input type="text" name="StrengthValueNumeratorUnit" class="form-control studio-autocomplete" id="Create_New_Custom_Medication_StrengthValueNumeratorUnit-{0}" data-singleselect="true" data-query-url="https://synapsestudio-demo.azurewebsites.net/Formulary/SearchUOMs">
                                            <span class="field-validation-valid" data-valmsg-for="StrengthValueNumeratorUnit" data-valmsg-replace="true" id="Create_New_Custom_Medication_StrengthValueNumeratorUnit-{0}"></span>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="StrengthValDenominator" class="col-sm-3 col-form-label">Strength Value Denominator</label>
                                        <div class="col-sm-4">
                                            <input type="text" name="StrengthValDenominator" class="form-control" id="Create_New_Custom_Medication_StrengthValDenominator-{0}">
                                            <span class="field-validation-valid" data-valmsg-for="StrengthValDenominator" data-valmsg-replace="true" id="Create_New_Custom_Medication_StrengthValDenominator-{0}"></span>
                                        </div>
                                        <div class="col-sm-4">
                                            <input type="text" name="StrengthValueDenominatorUnit" class="form-control studio-autocomplete" id="Create_New_Custom_Medication_StrengthValueDenominatorUnit-{0}" data-singleselect="true" data-query-url="https://synapsestudio-demo.azurewebsites.net/Formulary/SearchUOMs">
                                            <span class="field-validation-valid" data-valmsg-for="StrengthValueDenominatorUnit" data-valmsg-replace="true" id="Create_New_Custom_Medication_StrengthValueDenominatorUnit-{0}"></span>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="BasisOfPharmaceuticalStrength" class="col-sm-3 col-form-label">Basis of pharmaceutical strength</label>
                                        <div class="col-sm-4">
                                            <select class="form-control" id="Create_New_Custom_Medication_BasisOfPharmaceuticalStrength-{0}" name="BasisOfPharmaceuticalStrength">
                                                <option value="">Please Select</option>
                                                <option value="1">Based on Ingredient Substance</option>
                                                <option value="2">Based on Base Substance</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <script type="text/javascript">
                                $('.remove-endorsement').click(function () {
                                    $(this).parent().parent().parent().remove();
                                });
                            </script>

                            <script type="text/javascript" src="/lib/token-input-1.6.0/src/jquery.tokeninput.js"></script>
                            <script type="text/javascript">

                                $(document).ready(function () {

                                    setTimeout(() => {
                                        let inputs = $(".vtm-edit-medication :input");
                                        if (inputs && inputs.length > 0) {
                                            inputs.each(function (indx, el) {
                                                let isReadOnly = $(this).data('isreadonly');
                                                if (isReadOnly == true) $(this).attr('readonly', true);
                                            });
                                        }
                                    }, 100);

                                    initAdditionalCodes('#Add_Custom_Medication');

                                    initIdentificationCodes('#Add_Custom_Medication');

                                    initCustomWarnings('#Add_Custom_Medication');

                                    initEndorsements('#Add_Custom_Medication');

                                    let rootCntrl = '#Add_Custom_Medication';

                                    let recStatusCntrolId = `${rootCntrl}_pnlReason`;
                                    onRecordStatusChange(recStatusCntrolId, $(recStatusCntrolId).data('initialstatus'));

                                    $(`${rootCntrl}_ddlRecordStatus`).on('change', function () {
                                        let rootCntrl = '#Add_Custom_Medication';
                                        let recStatusCntrolId = `${rootCntrl}_pnlReason`;
                                        onRecordStatusChange(recStatusCntrolId, $(this).val());
                                    });

                                    $(`${rootCntrl} :checkbox`).bootstrapToggle('destroy');

                                    setTimeout(() => {
                                        $(`${rootCntrl} :checkbox`).bootstrapToggle({
                                            on: 'Yes',
                                            off: 'No',
                                            onstyle: 'success',
                                            offstyle: 'danger',
                                            width: 70,
                                            size: 'sm'
                                        });
                                    }, 100);

                                    var cautions = new studio.AutoComplete(`${rootCntrl}_cautions`, null, null, null, { allowFreeTagging: true });
                                    cautions.init();

                                    var contraindications = new studio.AutoComplete(`${rootCntrl}_contraindications`, null, null, null, { disabled: true });
                                    contraindications.init();

                                    var sideEffects = new studio.AutoComplete(`${rootCntrl}_sideEffects`, null, null, null, { allowFreeTagging: true });
                                    sideEffects.init();

                                    var impSafetyInfo = new studio.AutoComplete(`${rootCntrl}_safetyMessages`, null, null, null, { allowFreeTagging: true });
                                    impSafetyInfo.init();

                                    var licensedUse = new studio.AutoComplete(`${rootCntrl}_licensedUse`, null, null, null, {});
                                    licensedUse.init();

                                    var unlicensedUse = new studio.AutoComplete(`${rootCntrl}_unlicensedUse`, null, null, null, {});
                                    unlicensedUse.init();

                                    var supplier = new studio.AutoComplete(`${rootCntrl}_supplier`, null, null, null, {});
                                    supplier.init();

                                    var tradefamily = new studio.AutoComplete(`${rootCntrl}_tradefamily`, null, null, null, {});
                                    tradefamily.init();

                                    var form = new studio.AutoComplete(`${rootCntrl}_form`, null, null, null, {});
                                    form.init();

                                    var unitdoseformunit = new studio.AutoComplete(`${rootCntrl}_unitdoseformunit`, null, null, null, {});
                                    unitdoseformunit.init();

                                    var unitdossseuom = new studio.AutoComplete(`${rootCntrl}_unitdossseuom`, null, null, null, {});
                                    unitdossseuom.init();

                                    let routeAutoComplete = new studio.AutoComplete(`${rootCntrl}_Route`);
                                    routeAutoComplete.init();

                                    let unlicensedRouteAutoComplete = new studio.AutoComplete(`${rootCntrl}_unlicensedRoute`);
                                    unlicensedRouteAutoComplete.init();

                                    $(`${rootCntrl}_btnAddEndorsement`).click(function () {

                                        let rootEl = $(this).closest('.root-vtm-edit-medication');
                                        let roolElId = $(rootEl).attr('id');
                                        let endorsementElSel = `#${roolElId} #EndorsementContainer`;

                                        let currIndex = $(endorsementElSel).data('currindex');
                                        if (currIndex === undefined || currIndex === null) currIndex = 0;
                                        else currIndex = currIndex + 1;

                                        var template = $.validator.format($.trim($(`#${roolElId}_endorsementTmpl`).html()));
                                        $(template(currIndex)).appendTo(endorsementElSel);
                                        $(endorsementElSel).data('currindex', currIndex);
                                    });

                                    $(`${rootCntrl}_btnAddCustomWarning`).click(function () {

                                        let rootEl = $(this).closest('.root-vtm-edit-medication');
                                        let roolElId = $(rootEl).attr('id');
                                        let customWarningContainerElSel = `#${roolElId} #CustomWarningContainer`;

                                        let currIndex = $(customWarningContainerElSel).data('currindex');
                                        if (currIndex === undefined || currIndex === null) currIndex = 0;
                                        else currIndex = currIndex + 1;

                                        var cwTemplate = $.validator.format($.trim($(`#${roolElId}_customWarningTmpl`).html()));
                                        $(cwTemplate(currIndex)).appendTo(customWarningContainerElSel);
                                        $(customWarningContainerElSel).data('currindex', currIndex);
                                    });

                                    $(`${rootCntrl}_btnAddIdentificationCode`).click(function () {

                                        let rootEl = $(this).closest('.root-vtm-edit-medication');
                                        let roolElId = $(rootEl).attr('id');
                                        let idenContainerElSel = `#${roolElId} #IdentificationCodeContainer`;

                                        let currIndex = $(idenContainerElSel).data('currindex');
                                        if (currIndex === undefined || currIndex === null) currIndex = 0;
                                        else currIndex = currIndex + 1;

                                        var indicationCodeTemplate = $.validator.format($.trim($(`#${roolElId}_identificationCodeTmpl`).html()));
                                        $(indicationCodeTemplate(currIndex)).appendTo(idenContainerElSel);
                                        $(idenContainerElSel).data('currindex', currIndex);
                                    });

                                    $(`${rootCntrl}_btnAddClassificationCode`).click(function () {

                                        let rootEl = $(this).closest('.root-vtm-edit-medication');
                                        let roolElId = $(rootEl).attr('id');
                                        let containerElSel = `#${roolElId} #ClassificationCodeContainer`;

                                        let currIndex = $(containerElSel).data('currindex');
                                        if (currIndex === undefined || currIndex === null) currIndex = 0;
                                        else currIndex = currIndex + 1;

                                        var template = $.validator.format($.trim($(`#${roolElId}_additionalCodeTmpl`).html()));
                                        $(template(currIndex)).appendTo(containerElSel);
                                        $(containerElSel).data('currindex', currIndex);
                                    });

                                    $(`${rootCntrl}_btnAddIngredient`).click(function () {

                                        let rootEl = $(this).closest('.root-vtm-edit-medication');
                                        let roolElId = $(rootEl).attr('id');
                                        let containerElSel = `#${roolElId} #IngredientContainer`;

                                        let currIndex = $(containerElSel).data('currindex');
                                        if (currIndex === undefined || currIndex === null) currIndex = 0;
                                        else currIndex = currIndex + 1;

                                        var template = $.validator.format($.trim($(`#${roolElId}_ingredientTmpl`).html()));
                                        $(template(currIndex)).appendTo(containerElSel);
                                        $(containerElSel).data('currindex', currIndex);
                                    });


                                });



                                function initIdentificationCodes(rootCntrlSel) {

                                    let idenContainerElSel = `${rootCntrlSel} #IdentificationCodeContainer`;

                                    let idenCodeTmplSel = `${rootCntrlSel}_identificationCodeTmpl`;

                                    let existingIdentCode = $(idenContainerElSel).data('existingidentificationcode');

                                    if (existingIdentCode && existingIdentCode.length > 0) {

                                        $(idenContainerElSel).html("");

                                        existingIdentCode.forEach(function (item, index) {
                                            //var addlCodeTemplate = (item && item.Source && item.Source === 'M') ? $.validator.format($.trim($(addlCodeTmplSel).html())) : $.validator.format($.trim($(addlCodeDisabledTmplSel).html()));
                                            var idenCodeTemplate = $.validator.format($.trim($(idenCodeTmplSel).html()));

                                            $(idenCodeTemplate(index)).appendTo(idenContainerElSel);

                                            $(`${rootCntrlSel}_IdentificationCode-${index}`).val(item.AdditionalCode);
                                            $(`${rootCntrlSel}_IdentificationCodeSystem-${index}`).val(item.AdditionalCodeSystem);

                                            $(idenContainerElSel).data('currindex', index);
                                        });
                                    }
                                }

                                function initEndorsements(rootCntrlSel) {

                                    let containerElSel = `${rootCntrlSel} #EndorsementContainer`;

                                    let tmplSel = `${rootCntrlSel}_endorsementTmpl`;

                                    let existingData = $(containerElSel).data('existingendorsements');

                                    if (existingData && existingData.length > 0) {

                                        $(containerElSel).html("");

                                        existingData.forEach(function (item, index) {
                                            let template = $.validator.format($.trim($(tmplSel).html()));

                                            $(template(index)).appendTo(containerElSel);

                                            $(`${rootCntrlSel}_txtEndorsement-${index}`).val(item);

                                            $(containerElSel).data('currindex', index);
                                        });
                                    }
                                }

                                function initCustomWarnings(rootCntrlSel) {

                                    let cwContainerElSel = `${rootCntrlSel} #CustomWarningContainer`;

                                    let cwTmplSel = `${rootCntrlSel}_customWarningTmpl`;

                                    let existingCW = $(cwContainerElSel).data('existingcustomwarning');

                                    if (existingCW && existingCW.length > 0) {

                                        $(cwContainerElSel).html("");

                                        existingCW.forEach(function (item, index) {
                                            let cwTemplate = $.validator.format($.trim($(cwTmplSel).html()));

                                            $(cwTemplate(index)).appendTo(cwContainerElSel);

                                            $(`${rootCntrlSel}_txtCustomWarning-${index}`).val(item.Warning);
                                            $(`${rootCntrlSel}_chkNeedResponse-${index}`).val(item.NeedResponse);

                                            $(cwContainerElSel).data('currindex', index);
                                        });
                                    }
                                }

                                function initEndorsements(rootCntrlSel) {

                                    let endorsementContainerElSel = `${rootCntrlSel} #EndorsementContainer`;

                                    let endorsementTmplSel = `${rootCntrlSel}_endorsementTmpl`;

                                    let existingEndorsement = $(endorsementContainerElSel).data('existingendorsement');

                                    if (existingEndorsement && existingEndorsement.length > 0) {

                                        $(endorsementContainerElSel).html("");

                                        existingEndorsement.forEach(function (item, index) {
                                            let endorsementTemplate = $.validator.format($.trim($(endorsementTmplSel).html()));

                                            $(endorsementTemplate(index)).appendTo(endorsementContainerElSel);

                                            $(`${rootCntrlSel}_txtEndorsement-${index}`).val(item);

                                            $(endorsementContainerElSel).data('currindex', index);
                                        });
                                    }
                                }

                                function initAdditionalCodes(rootCntrlSel) {
                                    let addlContainerElSel = `${rootCntrlSel} #AdditionalCodeContainer`;
                                    //let addlCodeTmplSel = `${rootCntrlSel}_additionalCodeTmpl`;
                                    let addlCodeDisabledTmplSel = `${rootCntrlSel}_additionalCodeDisabledTmpl`;

                                    let existingAddnCode = $(addlContainerElSel).data('existingadditionalcode');

                                    if (existingAddnCode && existingAddnCode.length > 0) {

                                        $(addlContainerElSel).html("");

                                        existingAddnCode.forEach(function (item, index) {
                                            //var addlCodeTemplate = (item && item.Source && item.Source === 'M') ? $.validator.format($.trim($(addlCodeTmplSel).html())) : $.validator.format($.trim($(addlCodeDisabledTmplSel).html()));
                                            var addlCodeTemplate = $.validator.format($.trim($(addlCodeDisabledTmplSel).html()));
                                            $(addlCodeTemplate(index)).appendTo(addlContainerElSel);

                                            $(`${rootCntrlSel}_AdditionalCode-${index}`).val(item.AdditionalCode);
                                            $(`${rootCntrlSel}_AdditionalCodeSystem-${index}`).val(item.AdditionalCodeSystem);

                                            $(addlContainerElSel).data('currindex', index);
                                        });
                                    }
                                }

                                function onRecordStatusChange(reasonControlId, val) {
                                    if (!reasonControlId) return;
                                    if (val && val === "004")
                                        $(reasonControlId).show();
                                    else
                                        $(reasonControlId).hide();
                                }
                            </script>
                            <script type="text/javascript" src="/js/studio.autocomplete.js"></script>
                            <script src="/lib/jquery-validation/dist/jquery.validate.js"></script>
                            <script src="/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
                            <script src="/lib/jquery-validation-unobtrusive/jquery.unobtrusive-ajax.js"></script>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="btnSaveCustomMed">Save</button>
                </div>
            </div>
        </div>
    </div>
    <!------------------------------------------Add Custom Formulary Starts-------------------------------------->
    <!------------------------------------------Delete Formulary Starts-------------------------------------->


    <div class="modal fade" id="deleteFormulary" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Delete Formulary</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Ã</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="formularydelete">Reason</label>
                        <input id="deleteformularyVersionId" name="deleteformularyVersionId" type="hidden" value="">
                        <textarea class="form-control" id="formularydeleteReason" rows="4"></textarea>

                        <!--<label id="lbldeleteerror" style="color:red">
                            Please Enter Reason
                        </label>-->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" id="btnsavedelete" class="btn btn-primary">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!------------------------------------------Delete Formulary Ends-------------------------------------->
    <!------------------------------------------Change Formulary Status Starts-------------------------------------->


    <div class="modal fade" id="changestatus" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Change Record Status</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Ã</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-4">
                            <label for="formularydelete">Change To Status : </label>
                            <input id="statuschangeformularyVersionId" name="statuschangeformularyVersionId" type="hidden" value="">
                        </div>
                        <div class="col-8">
                            <select class="form-control" id="ddlstatus"></select>
                        </div>
                    </div>
                    <br>
                    <div id="showstatusChangeReason" class="row">
                        <div class="col-4">

                            <label for="formularydelete">Reason</label>
                        </div>
                        <div class="col-8">
                            <textarea class="form-control" id="statusChangeReason" rows="4"></textarea>
                            <br>
                            <label id="lblstatuschangeerror" style="color:red">
                                Please Enter Reason
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" id="btnstatuschange" class="btn btn-primary">Update</button>
                </div>
            </div>
        </div>
    </div>


    <!------------------------------------------Change Formulary Starts-------------------------------------->

</body>
</html>